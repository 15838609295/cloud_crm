(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1a8d"],{CDIZ:function(e,t,a){},IsUU:function(e,t,a){"use strict";a.r(t);var r=a("zAZ/"),n={data:function(){return{downloadLoading:!1,searchTerms:{state:"",examPaperType:"",date:[],searchValue:""},examPaperTypeList:[],tableMaxHeight:document.documentElement.clientHeight-380,tableLoading:!1,currentPage:1,pageSize:this.$store.getters.userInfo.pageSize,pageSizes:[10,20,50,100,1e3],total:0,tableData:[]}},created:function(){this.getData(),this.getExamPaperTypeList()},methods:{handleCurrentChange:r.c,handleSizeChange:r.d,handleSortChange:r.e,parseTime:r.f,getData:function(e){var t=this;this.tableLoading=!0,e||(e={});var a={pageNo:this.currentPage,pageSize:this.pageSize,search:this.searchTerms.searchValue,status:this.searchTerms.status,typeId:this.searchTerms.examPaperType};this.searchTerms.date&&0!==this.searchTerms.date.length&&(a.startTime=this.searchTerms.date[0],a.endTime=this.searchTerms.date[1]),e.sortName&&(a.sortName=e.sortName),e.sortOrder&&(a.sortOrder=e.sortOrder),this.$store.dispatch("GetConnect",{url:"exam/examList",data:a}).then(function(e){for(var a in t.tableData=e.data.rows,t.tableData)t.tableData[a].group_name=t.tableData[a].group_name.split("/");t.total=e.data.total,t.tableLoading=!1}).catch(function(e){t.tableLoading=!1,t.$message.error(e.msg+",请刷新或联系管理员")})},getExamPaperTypeList:function(){var e=this;this.$store.dispatch("GetConnect",{url:"exam/typeList"}).then(function(t){e.examPaperTypeList=t.data}).catch(function(t){e.$message.error(t.msg+",请刷新或联系管理员")})},toExamInfo:function(e){this.$router.push({path:"/exam/examInfo",query:{id:e.id}})},toCreateExam:function(){this.$router.push({path:"/exam/create"})},toStopExam:function(e){var t=this;this.$confirm("此操作将停止本次考试, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a="exam/stopTheExam/"+e.id;t.$store.dispatch("GetConnect",{url:a}).then(function(e){t.$message.success(e.msg),t.getData()}).catch(function(e){t.$message.error(e.msg)})})},toDeleteExam:function(e){var t=this;this.$confirm("此操作将删除该场考试, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a="exam/examDel/"+e.id;t.$store.dispatch("GetConnect",{url:a}).then(function(e){t.$message.success(e.msg),t.getData()}).catch(function(e){t.$message.error(e.msg)})})}}},s=(a("gFcm"),a("KHd+")),i=Object(s.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container bg-gray"},[a("el-card",{staticClass:"box-1"},[a("div",{staticClass:"header"},[a("div",[a("el-select",{staticClass:"select",attrs:{placeholder:"考试状态",clearable:""},on:{change:e.getData},model:{value:e.searchTerms.status,callback:function(t){e.$set(e.searchTerms,"status",t)},expression:"searchTerms.status"}},[a("el-option",{attrs:{value:1,label:"未开始"}}),e._v(" "),a("el-option",{attrs:{value:2,label:"考试中"}}),e._v(" "),a("el-option",{attrs:{value:3,label:"已结束"}})],1),e._v(" "),a("el-select",{staticClass:"select",attrs:{placeholder:"试卷分类",clearable:""},on:{change:e.getData},model:{value:e.searchTerms.examPaperType,callback:function(t){e.$set(e.searchTerms,"examPaperType",t)},expression:"searchTerms.examPaperType"}},e._l(e.examPaperTypeList,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),e._v(" "),a("el-date-picker",{staticClass:"picker",attrs:{editable:!1,type:"datetimerange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm"},on:{change:e.getData},model:{value:e.searchTerms.date,callback:function(t){e.$set(e.searchTerms,"date",t)},expression:"searchTerms.date"}}),e._v(" "),a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入考试名称"},on:{change:e.getData},model:{value:e.searchTerms.searchValue,callback:function(t){e.$set(e.searchTerms,"searchValue",t)},expression:"searchTerms.searchValue"}}),e._v(" "),a("el-button",{staticClass:"do-btn",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.getData}},[e._v("搜索")])],1),e._v(" "),a("div",[e.queryMatch(158)?a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.toCreateExam}},[e._v("创建考试")]):e._e()],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableData,"max-height":e.tableMaxHeight,border:"","highlight-current-row":""},on:{"sort-change":e.handleSortChange}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"100","header-align":"center",align:"center",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"考试名称","min-width":"160","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"试卷分类",width:"140","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.row.type_name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"total_score",label:"总分","min-width":"120","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"subject_number",label:"题目数","min-width":"120","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"limit_time",label:"限制时间","min-width":"120","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"forObject",label:"考试对象","min-width":"260","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.group_name,function(t){return a("el-tag",{key:t,staticStyle:{margin:"2px"},attrs:{type:"warning"}},[e._v(e._s(t))])})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"start_time",label:"考试时间",width:"280","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.parseTime(t.row.start_time,"{y}-{m}-{d} {h}:{i}")+" ~ "+e.parseTime(t.row.end_time,"{y}-{m}-{d} {h}:{i}"))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"120","header-align":"center",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[(t.row.status,a("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.row.status_txt))]))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"220","header-align":"center",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search",circle:""},on:{click:function(a){e.toExamInfo(t.row)}}}),e._v(" "),e.queryMatch(188)?a("el-tooltip",{attrs:{content:"停止考试",placement:"top"}},[2===t.row.status?a("el-button",{attrs:{type:"warning",size:"small",circle:"",icon:"el-icon-minus"},on:{click:function(a){e.toStopExam(t.row)}}}):e._e()],1):e._e(),e._v(" "),e.queryMatch(189)&&2!==t.row.status?a("el-button",{attrs:{type:"danger",size:"small",circle:"",icon:"el-icon-delete"},on:{click:function(a){e.toDeleteExam(t.row)}}}):e._e()]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":e.pageSizes,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(t){e.currentPage=t},"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1)},[],!1,null,"c5007948",null);i.options.__file="list.vue";t.default=i.exports},gFcm:function(e,t,a){"use strict";var r=a("CDIZ");a.n(r).a},"zAZ/":function(e,t,a){"use strict";a.d(t,"e",function(){return s}),a.d(t,"c",function(){return i}),a.d(t,"d",function(){return c}),a.d(t,"a",function(){return o}),a.d(t,"f",function(){return l}),a.d(t,"b",function(){return u});var r=a("EJiy"),n=a.n(r);function s(e){var t=e.column,a=e.prop,r=e.order;this.order={column:t,prop:a,order:r},this.getData({sortName:a,sortOrder:r&&("ascending"===r?"asc":"desc")})}function i(e){this.getData(this.order?{sortName:this.order.prop,sortOrder:this.order.order&&("ascending"===this.order.order?"asc":"desc")}:{})}function c(e){this.$store.getters.userInfo.pageSize=e,this.pageSize=e,this.getData(this.order?{sortName:this.order.prop,sortOrder:this.order.order&&("ascending"===this.order.order?"asc":"desc")}:{})}function o(e){this.th[e].check=!this.th[e].check}function l(e,t){if(0===arguments.length)return null;var a=t||"{y}-{m}-{d} {h}:{i}:{s}",r=void 0;"object"===(void 0===e?"undefined":n()(e))?r=e:(10===(""+e).length&&(e=1e3*parseInt(e)),r=new Date(e));var s={y:r.getFullYear(),m:r.getMonth()+1,d:r.getDate(),h:r.getHours(),i:r.getMinutes(),s:r.getSeconds(),a:r.getDay()};return a.replace(/{(y|m|d|h|i|s|a)+}/g,function(e,t){var a=s[t];return"a"===t?["日","一","二","三","四","五","六"][a]:(e.length>0&&a<10&&(a="0"+a),a||0)})}function u(e){var t=e.substr(0,10);t=t.replace(/-/g,"/");var a=new Date(t),r=new Date;r=r.valueOf();var n=Math.ceil((a-r)/864e5);return 0===n?"今天":n>0&&n<30?n+"天":n>=30&&n<360?Math.ceil(n/30)+"月":n>=360?Math.ceil(n/360)+"年":"逾期"+Math.ceil((r-a)/864e5)+"天"}}}]);