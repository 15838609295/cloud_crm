(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7fa3"],{MO55:function(e,t,a){"use strict";var n=a("gEZL");a.n(n).a},YQ37:function(e,t,a){"use strict";var n=a("iN4r");a.n(n).a},YbJm:function(e,t,a){"use strict";var n={props:{checkItems:{type:Array,default:function(){return[]}}},data:function(){return{checkList:[]}},created:function(){for(var e in this.checkItems)this.checkItems[e].check&&this.checkList.push(this.checkItems[e].name)},methods:{change:function(e){this.$emit("change",e)}}},s=(a("MO55"),a("KHd+")),r=Object(s.a)(n,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dropdown",{staticClass:"controller",attrs:{"hide-on-click":!1}},[n("img",{attrs:{src:a("vtJi")}}),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("div",{staticClass:"title"},[e._v("列控制器")]),e._v(" "),n("el-checkbox-group",{attrs:{min:1},model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.checkItems,function(t,a){return n("el-dropdown-item",{key:a,attrs:{divided:0==a}},[n("el-checkbox",{attrs:{label:t.name},on:{change:function(t){e.change(a)}}})],1)}))],1)],1)},[],!1,null,"caf1a010",null);r.options.__file="ColumnController.vue";var i=r.exports;a.d(t,"a",function(){return i})},aslK:function(e,t,a){"use strict";a.r(t);var n=a("YbJm"),s=a("zAZ/"),r=a("X4fA"),i={components:{ColumnController:n.a},data:function(){return{isShow:!1,tableMaxHeight:document.documentElement.clientHeight-280,th:[{name:"用户名",check:!0},{name:"性别",check:!0},{name:"手机",check:!0},{name:"邮箱",check:!0},{name:"客户总数",check:!0},{name:"账户余额",check:!0},{name:"奖金余额",check:!0},{name:"公司名称",check:!0},{name:"入职时间",check:!0},{name:"最近登录时间",check:!0}],searchTerms:{team:"",company:"",searchValue:"",status:""},dialogVisible:!1,transfer:{id:"",toId:""},companyLoading:!1,companyList:[],teamLoading:!1,teamList:[],saleLoading:!1,saleList:[],tableLoading:!1,currentPage:1,pageSize:this.$store.getters.userInfo.pageSize,pageSizes:[10,20,50,100,1e3],total:0,tableData:[]}},watch:{$route:function(e){var t=this;"系统用户"===e.name?(this.getData(),setTimeout(function(){t.isShow=!0},500)):this.isShow=!1}},created:function(){"系统用户"===this.$route.name&&(this.isShow=!0,this.getData())},methods:{handleCurrentChange:s.c,handleSizeChange:s.d,handleSortChange:s.e,columnCheck:s.a,parseTime:s.f,setViceToken:r.f,getData:function(e){var t=this;this.tableLoading=!0,e||(e={});var a={page_no:this.currentPage,page_size:this.pageSize,search:this.searchTerms.searchValue,company_id:this.searchTerms.company,branch_id:this.searchTerms.team,status:this.searchTerms.status};e.sortName&&(a.sortName=e.sortName),e.sortOrder&&(a.sortOrder=e.sortOrder),this.$store.dispatch("GetConnect",{url:"user/list",data:a}).then(function(e){t.tableData=e.data.rows,t.total=e.data.total,t.tableLoading=!1}).catch(function(e){t.tableLoading=!1,t.$message.error(e.msg+",请刷新或联系管理员")})},getTeamList:function(e){var t=this;if(e){this.teamLoading=!0;this.$store.dispatch("GetConnect",{url:"branch/all-list"}).then(function(e){t.teamList=e.data,t.teamLoading=!1}).catch(function(e){t.teamLoading=!1,t.$message.error(e.msg+",请刷新或联系管理员")})}},getCompanyList:function(e){var t=this;if(e){this.companyLoading=!0;this.$store.dispatch("GetConnect",{url:"company/all-list"}).then(function(e){t.companyList=e.data,t.companyLoading=!1}).catch(function(e){t.companyLoading=!1,t.$message.error(e.msg+",请刷新或联系管理员")})}},getSaleList:function(e){var t=this;if(""!==e){this.saleLoading=!0;this.$store.dispatch("GetConnect",{url:"user/all-list"}).then(function(e){t.saleList=e.data,t.saleLoading=!1}).catch(function(e){t.saleLoading=!1,t.$message.error(e.msg+",请刷新或联系管理员")})}},setState:function(e){var t=this;e.status=0===e.status?1:0;var a="user/ajax/"+e.id,n={action:"update_status",status:e.status};this.$store.dispatch("GetConnect",{url:a,data:n}).then(function(a){t.$message.success("修改用户账号状态成功，状态："+(0===e.status?"启用":"禁用"))}).catch(function(a){e.status=0===e.status?1:0,t.$message.error("修改用户状态失败，请刷新或联系管理员")})},toPersonal:function(e){var t=this,a="user/switchUser?id="+e.id;this.$store.dispatch("GetConnect",{url:a}).then(function(e){t.setViceToken(e.data.token),t.$store.dispatch("SetToken",e.data.token).then(function(){var e=t.$loading();t.$router.push({path:"/workbench"}),setTimeout(function(){location.reload(),e.close()},800)})}).catch(function(){t.$message.error("跳转失败，请刷新或联系管理员")})},toWallet:function(e){this.$router.push({path:"/wallet/details",query:{id:e.id}})},toUserInfo:function(e){this.isShow=!1,this.$router.push({path:"/permissions/users/userInfo",query:{id:e.id}})},toModifyRoles:function(e,t){this.isShow=!1;var a={title:e};t&&(a.id=t.id),this.$router.push({path:"/permissions/users/modifyUser",query:a})},toDelete:function(e){var t=this;this.$confirm("此操作将删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a="user/delete/"+e.id;t.$store.dispatch("GetConnect",{url:a}).then(function(e){t.$message.success("删除成功!"),t.getData()}).catch(function(e){t.$message.error(e.msg+"，请刷新或联系管理员")})})},showTransfer:function(e){this.dialogVisible=!0,this.transfer.id=e.id},toTransfer:function(){var e=this;""===this.transfer.toId||null===this.transfer.toId?this.$message.error("请选择要转移至哪位销售"):this.$confirm("此操作将转移该用户下所有客户及订单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={exchange_user:e.transfer.toId,uid:e.transfer.id};e.$store.dispatch("GetConnect",{url:"user/exchange",data:t}).then(function(t){e.$message.success("转移成功!"),e.getData()}).catch(function(t){e.$message.error(t.msg+"，请刷新或联系管理员")})})}}},o=(a("YQ37"),a("KHd+")),c=Object(o.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container  bg-gray"},[a("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[a("router-view")],1),e._v(" "),e.isShow?a("el-row",{staticClass:"box-1"},[a("el-col",{attrs:{span:24}},[a("el-card",[a("div",{staticClass:"header"},[a("div",[a("el-select",{attrs:{loading:e.companyLoading,placeholder:"部门",clearable:""},on:{change:e.getData,"visible-change":e.getCompanyList},model:{value:e.searchTerms.company,callback:function(t){e.$set(e.searchTerms,"company",t)},expression:"searchTerms.company"}},e._l(e.companyList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("el-select",{attrs:{loading:e.teamLoading,placeholder:"团队",clearable:""},on:{change:e.getData,"visible-change":e.getTeamList},model:{value:e.searchTerms.team,callback:function(t){e.$set(e.searchTerms,"team",t)},expression:"searchTerms.team"}},e._l(e.teamList,function(e){return a("el-option",{key:e.id,attrs:{label:e.branch_name,value:e.id}})})),e._v(" "),a("el-select",{attrs:{placeholder:"状态",clearable:""},on:{change:e.getData,"visible-change":e.getTeamList},model:{value:e.searchTerms.status,callback:function(t){e.$set(e.searchTerms,"status",t)},expression:"searchTerms.status"}},[a("el-option",{attrs:{value:1,label:"禁用"}}),e._v(" "),a("el-option",{attrs:{value:0,label:"启用"}})],1),e._v(" "),a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入内容"},on:{change:e.getData},model:{value:e.searchTerms.searchValue,callback:function(t){e.$set(e.searchTerms,"searchValue",t)},expression:"searchTerms.searchValue"}}),e._v(" "),a("el-button",{staticClass:"do-btn",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.getData}},[e._v("搜索")])],1),e._v(" "),a("div",[e.queryMatch(11)?a("el-button",{staticClass:"bg-green",attrs:{type:"success",icon:"el-icon-circle-plus"},on:{click:function(t){e.toModifyRoles("新增用户")}}},[e._v("新增用户")]):e._e(),e._v(" "),a("column-controller",{attrs:{"check-items":e.th},on:{change:e.columnCheck}})],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableData,"max-height":e.tableMaxHeight,border:"","highlight-current-row":""},on:{"sort-change":e.handleSortChange}},[a("el-table-column",{attrs:{prop:"id",label:"ID","min-width":"65","header-align":"center",align:"center",sortable:""}}),e._v(" "),e.th[0].check?a("el-table-column",{attrs:{prop:"name",label:"用户名","min-width":"90","header-align":"center",align:"center"}}):e._e(),e._v(" "),e.th[1].check?a("el-table-column",{attrs:{prop:"sex",label:"性别","min-width":"80","header-align":"center",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.sex?t.row.sex:"--")+"\n            ")]}}])}):e._e(),e._v(" "),e.th[2].check?a("el-table-column",{attrs:{prop:"mobile",label:"手机","min-width":"120","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.mobile?t.row.mobile:"--")+"\n            ")]}}])}):e._e(),e._v(" "),e.th[3].check?a("el-table-column",{attrs:{prop:"email",label:"邮箱","min-width":"170","header-align":"center",align:"center"}}):e._e(),e._v(" "),e.th[4].check?a("el-table-column",{attrs:{prop:"total_customer",label:"客户总数","min-width":"100","header-align":"center",align:"center"}}):e._e(),e._v(" "),e.th[5].check&&e.queryMatch(127)?a("el-table-column",{attrs:{prop:"bonus",label:"账户余额","min-width":"120","header-align":"center",align:"center",sortable:""}}):e._e(),e._v(" "),e.th[6].check&&e.queryMatch(127)?a("el-table-column",{attrs:{prop:"sale_bonus",label:"奖金余额","min-width":"120","header-align":"center",align:"center",sortable:""}}):e._e(),e._v(" "),e.th[7].check&&e.queryMatch(108)?a("el-table-column",{attrs:{prop:"company_name",label:"部门名称","min-width":"100","header-align":"center",align:"center"}}):e._e(),e._v(" "),e.th[8].check?a("el-table-column",{attrs:{prop:"hiredate",label:"入职时间","min-width":"110","header-align":"center",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e.parseTime(t.row.hiredate,"{y}-{m}-{d}"))+"\n            ")]}}])}):e._e(),e._v(" "),e.th[9].check?a("el-table-column",{attrs:{prop:"create_time",label:"最近登录时间","min-width":"160","header-align":"center",align:"center",sortable:""}}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"状态","min-width":"80","header-align":"center",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{on:{click:function(a){e.queryMatch(12)&&e.setState(t.row)}}},[a("el-tag",{attrs:{type:1===t.row.status?"danger":"primary"}},[e._v(e._s(1===t.row.status?"禁用":"启用"))])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"220","header-align":"center",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.queryMatch(202)?a("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-warning",circle:""},on:{click:function(a){e.toPersonal(t.row)}}}):e._e(),e._v(" "),e.queryMatch(12)?a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search",circle:""},on:{click:function(a){e.toUserInfo(t.row)}}}):e._e(),e._v(" "),a("el-tooltip",{attrs:{content:"钱包明细",placement:"top"}},[e.queryMatch(186)?a("el-button",{staticClass:"bg-green",attrs:{type:"warning",size:"small",circle:""},on:{click:function(a){e.toWallet(t.row)}}},[a("svg-icon",{attrs:{"icon-class":"wallet2"}})],1):e._e()],1),e._v(" "),e.queryMatch(13)?a("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",circle:""},on:{click:function(a){e.toDelete(t.row)}}}):e._e(),e._v(" "),e.queryMatch(218)?a("el-tooltip",{attrs:{content:"订单转移",placement:"top"}},[a("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-share",circle:""},on:{click:function(a){e.showTransfer(t.row)}}})],1):e._e()]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":e.pageSizes,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(t){e.currentPage=t},"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1)],1):e._e(),e._v(" "),a("el-dialog",{staticClass:"dialog",attrs:{visible:e.dialogVisible,title:"订单转移",width:"360px",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"content"},[a("el-select",{attrs:{loading:e.saleLoading,placeholder:"请选择转移用户",filterable:""},on:{"visible-change":e.getSaleList},model:{value:e.transfer.toId,callback:function(t){e.$set(e.transfer,"toId",t)},expression:"transfer.toId"}},e._l(e.saleList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.toTransfer}},[e._v("确 定")])],1)])],1)},[],!1,null,"34bab748",null);c.options.__file="index.vue";t.default=c.exports},gEZL:function(e,t,a){},iN4r:function(e,t,a){},vtJi:function(e,t){e.exports="data:image/png;base64,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"},"zAZ/":function(e,t,a){"use strict";a.d(t,"e",function(){return r}),a.d(t,"c",function(){return i}),a.d(t,"d",function(){return o}),a.d(t,"a",function(){return c}),a.d(t,"f",function(){return l}),a.d(t,"b",function(){return h});var n=a("EJiy"),s=a.n(n);function r(e){var t=e.column,a=e.prop,n=e.order;this.order={column:t,prop:a,order:n},this.getData({sortName:a,sortOrder:n&&("ascending"===n?"asc":"desc")})}function i(e){this.getData(this.order?{sortName:this.order.prop,sortOrder:this.order.order&&("ascending"===this.order.order?"asc":"desc")}:{})}function o(e){this.$store.getters.userInfo.pageSize=e,this.pageSize=e,this.getData(this.order?{sortName:this.order.prop,sortOrder:this.order.order&&("ascending"===this.order.order?"asc":"desc")}:{})}function c(e){this.th[e].check=!this.th[e].check}function l(e,t){if(0===arguments.length)return null;var a=t||"{y}-{m}-{d} {h}:{i}:{s}",n=void 0;"object"===(void 0===e?"undefined":s()(e))?n=e:(10===(""+e).length&&(e=1e3*parseInt(e)),n=new Date(e));var r={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()};return a.replace(/{(y|m|d|h|i|s|a)+}/g,function(e,t){var a=r[t];return"a"===t?["日","一","二","三","四","五","六"][a]:(e.length>0&&a<10&&(a="0"+a),a||0)})}function h(e){var t=e.substr(0,10);t=t.replace(/-/g,"/");var a=new Date(t),n=new Date;n=n.valueOf();var s=Math.ceil((a-n)/864e5);return 0===s?"今天":s>0&&s<30?s+"天":s>=30&&s<360?Math.ceil(s/30)+"月":s>=360?Math.ceil(s/360)+"年":"逾期"+Math.ceil((n-a)/864e5)+"天"}}}]);