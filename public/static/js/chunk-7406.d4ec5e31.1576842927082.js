(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7406"],{I6Rk:function(e,t,r){"use strict";var s=r("S/Hl");r.n(s).a},I9HD:function(e,t,r){"use strict";r.r(t);var s={data:function(){return{ImageUrl:"",dialogImageUrl:"",showImageDialog:!1,usersList:[],goodsList:[],form:{},formRules:{goods_name:[{required:!0,message:"请输入客户名",trigger:"change"}]}}},watch:{},created:function(){this.id=this.$route.query.id,this.getData(),this.getUsersList(),this.getGoodsList()},methods:{getData:function(){var e=this,t="achievement/detail/"+this.id;this.$store.dispatch("GetConnect",{url:t}).then(function(t){e.form=t.data,e.form.pic_list=t.data.sale_proof.join(","),e.form.pic_list_url=[],t.data.sale_proof.forEach(function(t){e.form.pic_list_url.push({id:t,url:e.ImageUrl+t})})}).catch(function(t){e.$message.error(t.msg+",请刷新或联系管理员")})},getUsersList:function(){var e=this;this.$store.dispatch("GetConnect",{url:"user/all-list"}).then(function(t){e.usersList=t.data}).catch(function(t){e.$message.error(t.msg+",请刷新或联系管理员")})},getGoodsList:function(){var e=this;this.$store.dispatch("GetConnect",{url:"goods/all-list"}).then(function(t){e.goodsList=t.data}).catch(function(t){e.$message.error(t.msg+",请刷新或联系管理员")})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var r=t.form;r.sale_proof=r.pic_list;var s="achievement/edit/"+t.id;t.$store.dispatch("GetConnect",{url:s,data:r}).then(function(e){t.$message.success(e.msg),t.$router.back(-1)}).catch(function(e){t.$message.error(e.msg)})}else t.$message.error("提交失败,请检查必填项")})},resetForm:function(e){this.$refs[e].resetFields()}}},o=(r("I6Rk"),r("KHd+")),a=Object(o.a)(s,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-1"},[r("div",{attrs:{slot:"header"},slot:"header"},[r("span",[e._v("业绩订单修改")])]),e._v(" "),r("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"160px"}},[r("el-form-item",{attrs:{label:"客户名称"}},[e._v("\n        "+e._s(e.form.member_name)+"\n      ")]),e._v(" "),r("el-form-item",{attrs:{label:"客户手机"}},[e._v("\n        "+e._s(e.form.member_phone)+"\n      ")]),e._v(" "),r("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[r("el-select",{attrs:{placeholder:"请选择商品",filterable:""},model:{value:e.form.goods_name,callback:function(t){e.$set(e.form,"goods_name",t)},expression:"form.goods_name"}},e._l(e.goodsList,function(e){return r("el-option",{key:e.id,attrs:{label:e.goods_name,value:e.goods_name}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"商品金额"}},[r("el-input",{model:{value:e.form.goods_money,callback:function(t){e.$set(e.form,"goods_money",t)},expression:"form.goods_money"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"订单号"}},[r("el-input",{model:{value:e.form.order_number,callback:function(t){e.$set(e.form,"order_number",t)},expression:"form.order_number"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"购买时间"}},[r("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.buy_time,callback:function(t){e.$set(e.form,"buy_time",t)},expression:"form.buy_time"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"购买时长"}},[r("el-input",{model:{value:e.form.buy_length,callback:function(t){e.$set(e.form,"buy_length",t)},expression:"form.buy_length"}}),e._v(" "),r("div",{staticClass:"remark"},[e._v("*注:时长是按月计算")])],1),e._v(" "),r("el-form-item",{attrs:{label:"售后人员"}},[r("el-select",{attrs:{placeholder:"请选择售后人员",filterable:""},model:{value:e.form.after_sale_id,callback:function(t){e.$set(e.form,"after_sale_id",t)},expression:"form.after_sale_id"}},e._l(e.usersList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{attrs:{type:"textarea",rows:"4"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"拒绝备注"}},[r("el-input",{attrs:{type:"textarea",rows:"4"},model:{value:e.form.refuse_remarks,callback:function(t){e.$set(e.form,"refuse_remarks",t)},expression:"form.refuse_remarks"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"销售凭证"}},[r("div",{staticClass:"remark"},[e._v("*注:最多传三张图")]),e._v(" "),r("ws-upload-multiple-img",{attrs:{path:e.form.pic_list_url,limit:3},model:{value:e.form.pic_list,callback:function(t){e.$set(e.form,"pic_list",t)},expression:"form['pic_list']"}})],1),e._v(" "),r("div",{staticStyle:{"text-align":"center"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v("保存")])],1)],1)],1)],1)},[],!1,null,"512a3a2a",null);a.options.__file="modify.vue";t.default=a.exports},"S/Hl":function(e,t,r){}}]);