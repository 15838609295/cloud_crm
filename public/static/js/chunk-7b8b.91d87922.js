(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7b8b"],{ALOR:function(e,t,a){"use strict";var n=a("krw/");a.n(n).a},jyOS:function(e,t,a){"use strict";a.r(t);var n=a("zAZ/"),r={data:function(){return{isShow:!1,searchTerms:{company_id:"",searchValue:"",job_status:""},companyList:[],tableMaxHeight:document.documentElement.clientHeight-320,multipleSelection:[],tableLoading:!1,currentPage:1,pageSize:this.$store.getters.userInfo.pageSize,pageSizes:[10,20,50,100,1e3],total:0,tableData:[]}},watch:{$route:function(e){var t=this;"员工列表"===e.name?(this.getData(),setTimeout(function(){t.isShow=!0},500)):this.isShow=!1}},created:function(){"员工列表"===this.$route.name&&(this.isShow=!0,this.getData(),this.getCompanyList())},methods:{handleCurrentChange:n.c,handleSizeChange:n.d,handleSortChange:n.e,columnCheck:n.a,parseTime:n.f,getData:function(e){var t=this;this.tableLoading=!0,e||(e={});var a={page_no:this.currentPage,page_size:this.pageSize,search:this.searchTerms.searchValue,company_id:this.searchTerms.company_id,job_status:this.searchTerms.job_status};e.sortName&&(a.sortName=e.sortName),e.sortOrder&&(a.sortOrder=e.sortOrder),this.$store.dispatch("GetConnect",{url:"hr/getDataList",data:a}).then(function(e){t.tableData=e.data.rows,t.total=e.data.total,t.tableLoading=!1}).catch(function(e){t.tableLoading=!1,t.$message.error(e.msg+",请刷新或联系管理员")})},getCompanyList:function(){var e=this;this.$store.dispatch("GetConnect",{url:"company/all-list"}).then(function(t){e.companyList=t.data}).catch(function(t){e.$message.error(t.msg+",请刷新或联系管理员")})},toDelete:function(e){var t=this;this.$confirm("此操作将删除该员工信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a="hr/del/"+e.id;t.$store.dispatch("GetConnect",{url:a}).then(function(e){t.$message.success(e.msg),t.getData()}).catch(function(e){t.$message.error("删除失败,请刷新或联系管理员!")})})},toInfo:function(e,t){this.isShow=!1;var a={title:e};t&&(a.id=t.id),this.$router.push({path:"/personnel/staff/info",query:a})},toModify:function(e,t){this.isShow=!1;var a={title:e};t&&(a.id=t.id),this.$router.push({path:"/personnel/staff/modify",query:a})}}},s=(a("ALOR"),a("KHd+")),i=Object(s.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container  bg-gray"},[a("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[a("router-view")],1),e._v(" "),e.isShow?a("el-row",{staticClass:"box-1"},[a("el-col",{attrs:{span:24}},[a("el-card",[a("div",{staticClass:"header"},[a("div",[a("el-select",{staticClass:"select",attrs:{placeholder:"在职 | 离职",clearable:""},on:{change:e.getData},model:{value:e.searchTerms.job_status,callback:function(t){e.$set(e.searchTerms,"job_status",t)},expression:"searchTerms.job_status"}},[a("el-option",{attrs:{label:"在职",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"离职",value:"0"}})],1),e._v(" "),a("el-select",{staticClass:"select",attrs:{placeholder:"部门",clearable:""},on:{change:e.getData},model:{value:e.searchTerms.company_id,callback:function(t){e.$set(e.searchTerms,"company_id",t)},expression:"searchTerms.company_id"}},e._l(e.companyList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入内容"},on:{change:e.getData},model:{value:e.searchTerms.searchValue,callback:function(t){e.$set(e.searchTerms,"searchValue",t)},expression:"searchTerms.searchValue"}}),e._v(" "),a("el-button",{staticClass:"do-btn",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.getData}},[e._v("搜索")])],1),e._v(" "),a("div")]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableData,"max-height":e.tableMaxHeight,border:"","highlight-current-row":""},on:{"sort-change":e.handleSortChange}},[a("el-table-column",{attrs:{prop:"id",label:"ID","min-width":"65","header-align":"center",align:"center",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"用户名","min-width":"90","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"性别","min-width":"70","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(""==t.row.sex||null==t.row.sex?"--":t.row.sex)+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机","min-width":"120","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(""==t.row.mobile||null==t.row.mobile?"--":t.row.mobile)+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱","min-width":"165","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"company_name",label:"部门名称","min-width":"100","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"hiredate",label:"入职时间","min-width":"110","header-align":"center",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.hiredate?e.parseTime(t.row.hiredate,"{y}-{m}-{d}"):"--")+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"formal_time",label:"转正时间","min-width":"110","header-align":"center",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.formal_time?e.parseTime(t.row.formal_time,"{y}-{m}-{d}"):"--")+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"last_login_time",label:"最近登录时间","min-width":"160","header-align":"center",align:"center",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"job_status",label:"在职状态","min-width":"110","header-align":"center",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(1===t.row.job_status?"在职":"离职")+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"160","header-align":"center",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search",circle:""},on:{click:function(a){e.toInfo("员工信息",t.row)}}}),e._v(" "),e.queryMatch(114)&&1!==t.row.id?a("el-button",{staticClass:"bg-green",attrs:{type:"success",size:"small",icon:"el-icon-edit",circle:""},on:{click:function(a){e.toModify("编辑员工信息",t.row)}}}):e._e()]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":e.pageSizes,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(t){e.currentPage=t},"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1)],1):e._e()],1)},[],!1,null,"7f87323d",null);i.options.__file="index.vue";t.default=i.exports},"krw/":function(e,t,a){},"zAZ/":function(e,t,a){"use strict";a.d(t,"e",function(){return s}),a.d(t,"c",function(){return i}),a.d(t,"d",function(){return o}),a.d(t,"a",function(){return l}),a.d(t,"f",function(){return c}),a.d(t,"b",function(){return u});var n=a("EJiy"),r=a.n(n);function s(e){var t=e.column,a=e.prop,n=e.order;this.order={column:t,prop:a,order:n},this.getData({sortName:a,sortOrder:n&&("ascending"===n?"asc":"desc")})}function i(e){this.getData(this.order?{sortName:this.order.prop,sortOrder:this.order.order&&("ascending"===this.order.order?"asc":"desc")}:{})}function o(e){this.$store.getters.userInfo.pageSize=e,this.pageSize=e,this.getData(this.order?{sortName:this.order.prop,sortOrder:this.order.order&&("ascending"===this.order.order?"asc":"desc")}:{})}function l(e){this.th[e].check=!this.th[e].check}function c(e,t){if(0===arguments.length)return null;var a=t||"{y}-{m}-{d} {h}:{i}:{s}",n=void 0;"object"===(void 0===e?"undefined":r()(e))?n=e:(10===(""+e).length&&(e=1e3*parseInt(e)),n=new Date(e));var s={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()};return a.replace(/{(y|m|d|h|i|s|a)+}/g,function(e,t){var a=s[t];return"a"===t?["日","一","二","三","四","五","六"][a]:(e.length>0&&a<10&&(a="0"+a),a||0)})}function u(e){var t=e.substr(0,10);t=t.replace(/-/g,"/");var a=new Date(t),n=new Date;n=n.valueOf();var r=Math.ceil((a-n)/864e5);return 0===r?"今天":r>0&&r<30?r+"天":r>=30&&r<360?Math.ceil(r/30)+"月":r>=360?Math.ceil(r/360)+"年":"逾期"+Math.ceil((n-a)/864e5)+"天"}}}]);