(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-69f5"],{DHpE:function(t,e,r){"use strict";r.r(e);var a=r("P2sY"),s=r.n(a),o=r("zAZ/"),i=r("Yfch"),n={data:function(){return{isShow:!1,searchTerms:{searchValue:""},typeList:[],dialogVisible:!1,form:{title:"添加分类",id:"",name:"",status:1,type:1,sort:"",cid:""},rules:{name:[{required:!0,message:"请输入标题",trigger:"change"}],sort:[{required:!0,message:"请输入权重",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},tableMaxHeight:document.documentElement.clientHeight-280,tableLoading:!1,currentPage:1,pageSize:this.$store.getters.userInfo.pageSize,pageSizes:[10,20,50,100,1e3],total:0,tableData:[]}},watch:{$route:function(t){var e=this;"新闻类型"===t.name?(this.getData({sortName:"sort",sortOrder:"desc"}),setTimeout(function(){e.isShow=!0},500)):this.isShow=!1}},created:function(){"新闻类型"===this.$route.name&&(this.isShow=!0,this.getData({sortName:"sort",sortOrder:"desc"}),this.loadTypeList())},methods:{handleCurrentChange:o.c,handleSizeChange:o.d,handleSortChange:o.e,getData:function(t){var e=this;this.tableLoading=!0,t||(t={});var r={page_no:this.currentPage,page_size:this.pageSize,search:this.searchTerms.searchValue,type:1};t.sortName&&(r.sortName=t.sortName),t.sortOrder&&(r.sortOrder=t.sortOrder),this.$store.dispatch("GetConnect",{url:"lookarticles/typeList",data:r}).then(function(t){e.tableData=t.data.rows,e.total=t.data.total,e.tableLoading=!1}).catch(function(t){e.tableLoading=!1,e.$message.error(t.msg+",请刷新或联系管理员")})},loadTypeList:function(){var t=this;this.$store.dispatch("GetConnect",{url:"lookarticles/allTypeList"}).then(function(e){t.typeList=e.data}).catch(function(e){t.$message.error(e.msg+",请刷新或联系管理员")})},toNewsList:function(t){this.isShow=!1,this.$router.push({path:"/information/newslist/list",query:{id:t.id}})},toCreateNews:function(){this.isShow=!1;this.$router.push({path:"/information/newslist/modify",query:{title:"发布新闻"}})},setState:function(t){var e=this;t.status=0===t.status?1:0;var r={id:t.id,status:t.status};this.$store.dispatch("GetConnect",{url:"lookarticles/updateStatus",data:r}).then(function(r){e.$message.success("修改新闻类型状态成功，状态："+(1===t.status?"已显示":"已隐藏")),e.getData({sortName:"sort",sortOrder:"desc"})}).catch(function(){t.status=0===t.status?1:0,e.$message.error("修改新闻类型状态失败，请刷新或联系管理员")})},toDelete:function(t){var e=this;this.$confirm("此操作将把该新闻类型删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var r="lookarticles/delType/"+t.id;e.$store.dispatch("GetConnect",{url:r}).then(function(t){e.$message.success(t.msg),e.getData({sortName:"sort",sortOrder:"desc"})}).catch(function(t){e.$message.error(t.msg+",请刷新或联系管理员!")})})},toAdd:function(){this.form={title:"添加分类",name:"",cid:"",type:1,status:1,sort:0,icon:null},this.dialogVisible=!0},toEdit:function(t){this.dialogVisible=!0,t.title="编辑分类",this.form=s()({},t),this.form.cid=[this.from.cid]},submitDialog:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var r=e.form.id?"/lookarticles/updateType":"/lookarticles/addType",a=e.form;if(a.cid=a.cid[e.form.cid.length-1],!Object(i.b)(e.form.name))return void e.$message.error("新闻类型不能包含特殊字符");e.$store.dispatch("GetConnect",{url:r,data:a}).then(function(t){e.dialogVisible=!1,e.$message.success(t.msg),e.getData({sortName:"sort",sortOrder:"desc"}),e.loadTypeList()}).catch(function(t){e.$message.error(t.msg+",请刷新或联系管理员!")})}else e.$message.error("提交失败,请检查必填项")})},resetDialog:function(t){this.$refs[t].resetFields()}}},l=(r("Jcq4"),r("KHd+")),c=Object(l.a)(n,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container  bg-gray"},[r("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[r("router-view")],1),t._v(" "),t.isShow?r("el-row",{staticClass:"box-1"},[r("el-col",{attrs:{span:24}},[r("el-card",[r("div",{staticClass:"header"},[r("div",[t.queryMatch(46)?r("el-button",{staticClass:"bg-green",attrs:{type:"success",icon:"el-icon-circle-plus"},on:{click:t.toCreateNews}},[t._v("发布新闻")]):t._e(),t._v(" "),t.queryMatch(161)?r("el-button",{attrs:{type:"warning",icon:"el-icon-circle-plus"},on:{click:t.toAdd}},[t._v("新增分类")]):t._e()],1)]),t._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],attrs:{data:t.tableData,"max-height":t.tableMaxHeight,"tree-props":{children:"children",hasChildren:"hasChildren"},"row-key":"id",border:"","default-expand-all":"","highlight-current-row":""},on:{"sort-change":t.handleSortChange}},[r("el-table-column",{attrs:{prop:"name",label:"类型标题","min-width":"260"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-tag",{attrs:{effect:e.row.cid?"plain":"dark",type:"primary"}},[t._v("\n                "+t._s(e.row.name)+t._s(2===e.row.type?"【专题】":"")+"\n              ")])]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"sort",label:"排序权重",width:"120","header-align":"center",align:"center",sortable:""}}),t._v(" "),t.queryMatch(162)?r("el-table-column",{attrs:{label:"状态","min-width":"80","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",{on:{click:function(r){t.queryMatch(162)&&t.setState(e.row)}}},[r("el-tag",{attrs:{type:0===e.row.status?"danger":"success"}},[t._v(t._s(0===e.row.status?"已隐藏":"已显示"))])],1)]}}])}):t._e(),t._v(" "),r("el-table-column",{attrs:{label:"操作",width:"200","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-tooltip",{attrs:{content:"新闻列表",placement:"top"}},[r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary",icon:"el-icon-more",circle:""},on:{click:function(r){t.toNewsList(e.row)}}})],1),t._v(" "),t.queryMatch(162)?r("el-button",{staticClass:"bg-green",staticStyle:{"margin-left":"10px"},attrs:{type:"success",size:"small",icon:"el-icon-edit",circle:""},on:{click:function(r){t.toEdit(e.row)}}}):t._e(),t._v(" "),t.queryMatch(163)?r("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",circle:""},on:{click:function(r){t.toDelete(e.row)}}}):t._e()]}}])})],1),t._v(" "),r("el-pagination",{staticClass:"pagination",attrs:{"current-page":t.currentPage,"page-size":t.pageSize,"page-sizes":t.pageSizes,total:t.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(e){t.currentPage=e},"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)],1)],1):t._e(),t._v(" "),r("el-dialog",{staticClass:"dialog",attrs:{visible:t.dialogVisible,modal:!1,title:t.form.title,width:"500px",center:""},on:{"update:visible":function(e){t.dialogVisible=e},close:function(e){t.resetDialog("form")}}},[r("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"130px"}},[r("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"名称",prop:"name"}},[r("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"上级分类："}},[r("el-cascader",{attrs:{options:t.typeList,props:{expandTrigger:"hover",checkStrictly:!0},clearable:""},model:{value:t.form.cid,callback:function(e){t.$set(t.form,"cid",e)},expression:"form.cid"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"图标"}},[r("ws-upload-single-img",{attrs:{path:t.form.icon},model:{value:t.form.icon,callback:function(e){t.$set(t.form,"icon",e)},expression:"form['icon']"}})],1),t._v(" "),"添加专题"!==t.form.title?r("el-form-item",{attrs:{label:"权重",prop:"sort"}},[r("el-input-number",{model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}}),t._v(" "),r("div",{staticClass:"remark"},[t._v("*注：权重越大排序越前")])],1):t._e(),t._v(" "),r("el-form-item",{attrs:{label:"状态",prop:"status"}},[r("el-radio-group",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form['status']"}},[r("el-radio",{attrs:{label:1}},[t._v("显示")]),t._v(" "),r("el-radio",{attrs:{label:0}},[t._v("隐藏")])],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"是否设为专题",prop:"type"}},[r("el-radio-group",{model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form['type']"}},[r("el-radio",{attrs:{label:2}},[t._v("是")]),t._v(" "),r("el-radio",{attrs:{label:1}},[t._v("否")])],1)],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitDialog("form")}}},[t._v("确 定")])],1)],1)],1)},[],!1,null,"6da19f50",null);c.options.__file="type.vue";e.default=c.exports},Jcq4:function(t,e,r){"use strict";var a=r("YsOG");r.n(a).a},Yfch:function(t,e,r){"use strict";function a(t){return/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/.test(t)}function s(t){return/^[A-Za-z0-9\u4e00-\u9fa5]+$/.test(t)&&!/^\d+$/.test(t)}function o(t){return/^[A-Za-z0-9\u4e00-\u9fa5]+$/.test(t)}function i(t,e){for(var r=t.split(""),a=0;a<r.length;a++)a>e-1&&a<r.length-e&&(r[a]="*");return r.join("")}r.d(e,"d",function(){return a}),r.d(e,"c",function(){return s}),r.d(e,"b",function(){return o}),r.d(e,"a",function(){return i})},YsOG:function(t,e,r){},"zAZ/":function(t,e,r){"use strict";r.d(e,"e",function(){return o}),r.d(e,"c",function(){return i}),r.d(e,"d",function(){return n}),r.d(e,"a",function(){return l}),r.d(e,"f",function(){return c}),r.d(e,"b",function(){return u});var a=r("EJiy"),s=r.n(a);function o(t){var e=t.column,r=t.prop,a=t.order;this.order={column:e,prop:r,order:a},this.getData({sortName:r,sortOrder:a&&("ascending"===a?"asc":"desc")})}function i(t){this.getData(this.order?{sortName:this.order.prop,sortOrder:this.order.order&&("ascending"===this.order.order?"asc":"desc")}:{})}function n(t){this.$store.getters.userInfo.pageSize=t,this.pageSize=t,this.getData(this.order?{sortName:this.order.prop,sortOrder:this.order.order&&("ascending"===this.order.order?"asc":"desc")}:{})}function l(t){this.th[t].check=!this.th[t].check}function c(t,e){if(0===arguments.length)return null;var r=e||"{y}-{m}-{d} {h}:{i}:{s}",a=void 0;"object"===(void 0===t?"undefined":s()(t))?a=t:(10===(""+t).length&&(t=1e3*parseInt(t)),a=new Date(t));var o={y:a.getFullYear(),m:a.getMonth()+1,d:a.getDate(),h:a.getHours(),i:a.getMinutes(),s:a.getSeconds(),a:a.getDay()};return r.replace(/{(y|m|d|h|i|s|a)+}/g,function(t,e){var r=o[e];return"a"===e?["日","一","二","三","四","五","六"][r]:(t.length>0&&r<10&&(r="0"+r),r||0)})}function u(t){var e=t.substr(0,10);e=e.replace(/-/g,"/");var r=new Date(e),a=new Date;a=a.valueOf();var s=Math.ceil((r-a)/864e5);return 0===s?"今天":s>0&&s<30?s+"天":s>=30&&s<360?Math.ceil(s/30)+"月":s>=360?Math.ceil(s/360)+"年":"逾期"+Math.ceil((a-r)/864e5)+"天"}}}]);