(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-c97c"],{"3BLj":function(e,t,r){"use strict";r.r(t);var o={data:function(){var e=this;return{title:"",ImageUrl:"",levelList:[],sourceList:[],form:{name:"",sex:"男",mobile:"",spare_mobile:[""],telephone:[""],email:[""],position:"",company:[""],wechat:[""],qq:[""],tencent_id:[""],realname:"",type:"",avatar:"",level:"",source:"",project:"",remarks:"",certify_name:"",certify_no:"",create_time:"",idcard_front_side:"",idcard_back_side:"",enterprise_pic:"",password:"",confirmPass:"",status:1},formRules:{name:[{required:!0,message:"请输入客户名",trigger:"change"}],realname:[{required:!0,message:"请输入客户真实姓名",trigger:"change"}],mobile:[{required:!0,message:"请填写手机号码",trigger:"change"}],email:[{required:!0,message:"请输入邮箱",trigger:"change"}],type:[{required:!0,message:"请选择客户类型",trigger:"change"}],level:[{required:!0,message:"请选择客户等级",trigger:"change"}],password:[{validator:function(t,r,o){"编辑用户"!==e.title&&""===r?o(new Error("请输入密码")):o()},trigger:"blur"}],confirmPass:[{validator:function(t,r,o){""!==e.form.password?""===r||null===r?o(new Error("请再次输入密码")):r!==e.form.password?o(new Error("两次输入密码不一致!")):o():o()},trigger:"blur"}]}}},watch:{},created:function(){this.title=this.$route.query.title,this.$route.query.id&&(this.id=this.$route.query.id,this.getUserInfo(this.$route.query.id)),this.getLevelList(),this.getSourceList()},methods:{getUserInfo:function(e){var t=this,r="member/detail/"+e;this.$store.dispatch("GetConnect",{url:r}).then(function(e){t.form=e.data,t.form.spare_mobile=e.data.spare_mobile?e.data.spare_mobile.split(","):[""],t.form.qq=e.data.qq?e.data.qq.split(","):[""],t.form.wechat=e.data.wechat?e.data.wechat.split(","):[""],t.form.email=e.data.email?e.data.email.split(","):[""],t.form.company=e.data.company?e.data.company.split(","):[""],t.form.telephone=e.data.telephone?e.data.telephone.split(","):[""],t.form.tencent_id=e.data.tencent_id?e.data.tencent_id.split(","):[""]}).catch(function(e){t.$message.error(e.msg+",请刷新或联系管理员")})},removeItem:function(e,t){var r=this.form[e].indexOf(t);-1!==r&&this.form[e].splice(r,1)},addItem:function(e){this.form[e].push("")},getLevelList:function(){var e=this;this.$store.dispatch("GetConnect",{url:"member/level-list"}).then(function(t){e.levelList=t.data}).catch(function(t){e.$message.error(t.msg+",请刷新或联系管理员")})},getSourceList:function(){var e=this;this.$store.dispatch("GetConnect",{url:"member/source-list"}).then(function(t){e.sourceList=t.data}).catch(function(t){e.$message.error(t.msg+",请刷新或联系管理员")})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var r=t.form;r.spare_mobile&&(r.spare_mobile=r.spare_mobile.join(",")),r.qq&&(r.qq=r.qq.join(",")),r.wechat&&(r.wechat=r.wechat.join(",")),r.company&&(r.company=r.company.join(",")),r.telephone&&(r.telephone=r.telephone.join(",")),r.email&&(r.email=r.email.join(",")),r.tencent_id&&(r.tencent_id=r.tencent_id.join(","));var o=t.id?"member/edit/"+t.id:"member/create";t.$store.dispatch("GetConnect",{url:o,data:r}).then(function(e){t.$message.success(e.msg),t.$router.back(-1)}).catch(function(e){t.$message.error(e.msg)})}else t.$message.error("提交失败,请检查必填项")})},resetForm:function(e){this.$refs[e].resetFields()}}},a=(r("VUgM"),r("KHd+")),l=Object(a.a)(o,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-1"},[r("div",{attrs:{slot:"header"},slot:"header"},[r("span",[e._v(e._s(e.title))])]),e._v(" "),r("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"160px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"name"}},[r("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"真实姓名",prop:"realname"}},[r("el-input",{model:{value:e.form.realname,callback:function(t){e.$set(e.form,"realname",t)},expression:"form.realname"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"头像"}},[r("ws-upload-single-img",{attrs:{path:e.form.avatar?e.form.avatar.indexOf("https://")<0?e.ImageUrl+e.form.avatar:e.form.avatar:""},model:{value:e.form.avatar,callback:function(t){e.$set(e.form,"avatar",t)},expression:"form['avatar']"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"公司"}},[r("div",[e._l(e.form.company,function(t,o){return r("el-input",{key:o,attrs:{placeholder:"请输入公司名称"},model:{value:e.form.company[o],callback:function(t){e.$set(e.form.company,o,t)},expression:"form['company'][companyIndex]"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-delete"},on:{click:function(r){r.preventDefault(),e.removeItem("company",t)}},slot:"append"})],1)}),e._v(" "),r("el-button",{staticStyle:{"margin-top":"5px"},attrs:{type:"info",plain:""},on:{click:function(t){t.preventDefault(),e.addItem("company")}}},[e._v("新增公司名")])],2)]),e._v(" "),r("el-form-item",{attrs:{label:"职位"}},[r("el-input",{model:{value:e.form.position,callback:function(t){e.$set(e.form,"position",t)},expression:"form.position"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"客户手机",prop:"mobile"}},[r("el-input",{attrs:{placeholder:"请输入主要手机号码"},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"其他手机"}},[r("div",[e._l(e.form.spare_mobile,function(t,o){return r("el-input",{key:o,attrs:{placeholder:"请输入其他联系手机号码"},model:{value:e.form.spare_mobile[o],callback:function(t){e.$set(e.form.spare_mobile,o,t)},expression:"form['spare_mobile'][mobileIndex]"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-delete"},on:{click:function(r){r.preventDefault(),e.removeItem("spare_mobile",t)}},slot:"append"})],1)}),e._v(" "),r("el-button",{staticStyle:{"margin-top":"5px"},attrs:{type:"info",plain:""},on:{click:function(t){t.preventDefault(),e.addItem("spare_mobile")}}},[e._v("新增手机号\n          ")])],2)]),e._v(" "),r("el-form-item",{attrs:{label:"座机"}},[r("div",[e._l(e.form.telephone,function(t,o){return r("el-input",{key:o,attrs:{placeholder:"请输入座机"},model:{value:e.form.telephone[o],callback:function(t){e.$set(e.form.telephone,o,t)},expression:"form['telephone'][telephoneIndex]"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-delete"},on:{click:function(r){r.preventDefault(),e.removeItem("telephone",t)}},slot:"append"})],1)}),e._v(" "),r("el-button",{staticStyle:{"margin-top":"5px"},attrs:{type:"info",plain:""},on:{click:function(t){t.preventDefault(),e.addItem("telephone")}}},[e._v("新增座机")])],2)]),e._v(" "),r("el-form-item",{attrs:{label:"腾讯云ID"}},[r("div",[e._l(e.form.qq,function(t,o){return r("el-input",{key:o,attrs:{placeholder:"请输入腾讯云ID"},model:{value:e.form.qq[o],callback:function(t){e.$set(e.form.qq,o,t)},expression:"form['qq'][qqIndex]"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-delete"},on:{click:function(r){r.preventDefault(),e.removeItem("qq",t)}},slot:"append"})],1)}),e._v(" "),r("el-button",{staticStyle:{"margin-top":"5px"},attrs:{type:"info",plain:""},on:{click:function(t){t.preventDefault(),e.addItem("qq")}}},[e._v("新增腾讯云ID")])],2)]),e._v(" "),r("el-form-item",{attrs:{label:"微信"}},[r("div",[e._l(e.form.wechat,function(t,o){return r("el-input",{key:o,attrs:{placeholder:"请输入微信号"},model:{value:e.form.wechat[o],callback:function(t){e.$set(e.form.wechat,o,t)},expression:"form['wechat'][wechatIndex]"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-delete"},on:{click:function(r){r.preventDefault(),e.removeItem("wechat",t)}},slot:"append"})],1)}),e._v(" "),r("el-button",{staticStyle:{"margin-top":"5px"},attrs:{type:"info",plain:""},on:{click:function(t){t.preventDefault(),e.addItem("wechat")}}},[e._v("新增微信")])],2)]),e._v(" "),r("el-form-item",{attrs:{label:"QQ"}},[r("div",[e._l(e.form.tencent_id,function(t,o){return r("el-input",{key:o,attrs:{placeholder:"请输入QQ"},model:{value:e.form.tencent_id[o],callback:function(t){e.$set(e.form.tencent_id,o,t)},expression:"form['tencent_id'][tencentIdIndex]"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-delete"},on:{click:function(r){r.preventDefault(),e.removeItem("tencent_id",t)}},slot:"append"})],1)}),e._v(" "),r("el-button",{staticStyle:{"margin-top":"5px"},attrs:{type:"info",plain:""},on:{click:function(t){t.preventDefault(),e.addItem("tencent_id")}}},[e._v("新增QQ号\n          ")])],2)]),e._v(" "),r("el-form-item",{attrs:{label:"邮箱"}},[r("div",[e._l(e.form.email,function(t,o){return r("el-input",{key:o,attrs:{placeholder:"请输入邮箱"},model:{value:e.form.email[o],callback:function(t){e.$set(e.form.email,o,t)},expression:"form['email'][emailIndex]"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-delete"},on:{click:function(r){r.preventDefault(),e.removeItem("email",t)}},slot:"append"})],1)}),e._v(" "),r("el-button",{staticStyle:{"margin-top":"5px"},attrs:{type:"info",plain:""},on:{click:function(t){t.preventDefault(),e.addItem("email")}}},[e._v("新增邮箱")])],2)]),e._v(" "),r("el-form-item",{attrs:{label:"等级"}},[r("el-select",{attrs:{disabled:!e.queryMatch(203),placeholder:"请选择所属等级"},model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}},e._l(e.levelList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"类型",prop:"type"}},[r("el-select",{attrs:{placeholder:"请选择所属类型"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[r("el-option",{attrs:{value:0,label:"个人"}}),e._v(" "),r("el-option",{attrs:{value:1,label:"企业"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"客户来源"}},[r("el-select",{attrs:{placeholder:"请选择客户来源"},model:{value:e.form.source,callback:function(t){e.$set(e.form,"source",t)},expression:"form.source"}},e._l(e.sourceList,function(e){return r("el-option",{key:e.id,attrs:{label:e.source_name,value:e.source_name}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"注册时间"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.form.create_time,callback:function(t){e.$set(e.form,"create_time",t)},expression:"form.create_time"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码确认",prop:"confirmPass"}},[r("el-input",{attrs:{type:"password"},model:{value:e.form.confirmPass,callback:function(t){e.$set(e.form,"confirmPass",t)},expression:"form.confirmPass"}})],1),e._v(" "),r("el-form-item",{attrs:{label:0===e.form.type?"身份证姓名":"企业名称"}},[r("el-input",{model:{value:e.form.certify_name,callback:function(t){e.$set(e.form,"certify_name",t)},expression:"form.certify_name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:0===e.form.type?"身份证号码":"营业执照号"}},[r("el-input",{model:{value:e.form.certify_no,callback:function(t){e.$set(e.form,"certify_no",t)},expression:"form.certify_no"}})],1),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0===e.form.type,expression:"form.type===0"}],attrs:{label:"身份证正面"}},[r("ws-upload-single-img",{attrs:{path:e.form.idcard_front_side?e.ImageUrl+e.form.idcard_front_side:""},model:{value:e.form.idcard_front_side,callback:function(t){e.$set(e.form,"idcard_front_side",t)},expression:"form['idcard_front_side']"}})],1),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0===e.form.type,expression:"form.type===0"}],attrs:{label:"身份证反面"}},[r("ws-upload-single-img",{attrs:{path:e.form.idcard_back_side?e.ImageUrl+e.form.idcard_back_side:""},model:{value:e.form.idcard_back_side,callback:function(t){e.$set(e.form,"idcard_back_side",t)},expression:"form['idcard_back_side']"}})],1),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1===e.form.type,expression:"form.type===1"}],attrs:{label:"营业执照照片"}},[r("ws-upload-single-img",{attrs:{path:e.form.enterprise_pic?e.ImageUrl+e.form.enterprise_pic:""},model:{value:e.form.enterprise_pic,callback:function(t){e.$set(e.form,"enterprise_pic",t)},expression:"form['enterprise_pic']"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"状态"}},[r("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[r("el-radio",{attrs:{label:1}},[e._v("激活")]),e._v(" "),r("el-radio",{attrs:{label:0}},[e._v("冻结")])],1)],1),e._v(" "),r("div",{staticStyle:{"text-align":"center"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v(e._s("编辑用户"===e.title?"保存":"立即创建"))]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.$router.back(-1)}}},[e._v("取消")])],1)],1)],1)],1)},[],!1,null,"757f5ef4",null);l.options.__file="modifyUser.vue";t.default=l.exports},JAB5:function(e,t,r){},VUgM:function(e,t,r){"use strict";var o=r("JAB5");r.n(o).a}}]);