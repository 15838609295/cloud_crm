(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-10be"],{HsCC:function(e,t,a){"use strict";a.r(t);var n=a("zAZ/"),i={data:function(){return{activeName:"admin",downloadLoading:!1,searchTerms:{typeId:"",searchValue:""},teamList:{member:[],admin:[]},dialogVisible:!1,transfer:{examineeIds:[],groupIds:[]},tableMaxHeight:document.documentElement.clientHeight-380,tableLoading:!1,currentPage:1,pageSize:this.$store.getters.userInfo.pageSize,pageSizes:[10,20,50,100,1e3],total:0,tableData:[],multipleSelection:[]}},created:function(){this.getData(),this.getTeamList()},methods:{handleCurrentChange:n.c,handleSizeChange:n.d,handleSortChange:n.e,parseTime:n.f,handleTabClick:function(e,t){this.currentPage=1,this.multipleSelection=[],this.getData()},getData:function(e){var t=this;this.tableLoading=!0,e||(e={});var a={pageNo:this.currentPage,pageSize:this.pageSize,search:this.searchTerms.searchValue,type:this.activeName,typeId:this.searchTerms.typeId};e.sortName&&(a.sortName=e.sortName),e.sortOrder&&(a.sortOrder=e.sortOrder),this.$store.dispatch("GetConnect",{url:"exam/examineeList",data:a}).then(function(e){for(var a in t.tableData=e.data.rows,t.tableData)t.tableData[a].group_name=t.tableData[a].group_name.split("/");t.total=e.data.total,t.tableLoading=!1}).catch(function(e){t.tableLoading=!1,t.$message.error(e.msg+",请刷新或联系管理员")})},getTeamList:function(){var e=this;this.$store.dispatch("GetConnect",{url:"exam/examineeGroupList"}).then(function(t){e.teamList=t.data}).catch(function(t){e.$message.error(t.msg+",请刷新或联系管理员")})},toExamineeInfo:function(e){if("admin"===this.activeName){var t={title:"员工信息",id:e.id};this.$router.push({path:"/permissions/users/userInfo",query:t})}},handleSelectionChange:function(e){this.multipleSelection=e},toBatchDelete:function(){var e=this;0===this.multipleSelection.length?(this.$message.error("请选择要删除的客户"),this.dialogVisible=!1):this.$confirm("此操作将删除所选考生, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={id:[]};e.multipleSelection.forEach(function(e){t.id.push(e.id)}),t.id=t.id.join(",")})},toSingerAddToTeam:function(e){this.dialogVisible=!0,this.multipleSelection.push(e),this.transfer={examineeIds:[],groupIds:[]}},toAddToTeam:function(){this.dialogVisible=!0,this.transfer={examineeIds:[],groupIds:[]}},toManageTeam:function(){this.$router.push({path:"/exam/examineeTeam",query:{type:"admin"===this.activeName?1:0}})},doTransfer:function(){var e=this;if(0===this.multipleSelection.length)this.$message.error("请选择要转移的考生"),this.dialogVisible=!1;else if(""===this.transfer.toId)this.$message.error("请选择要将考生指派给哪个销售");else{var t={examineeIds:[],groupIds:this.transfer.groupIds};this.multipleSelection.forEach(function(e){t.examineeIds.push(e.id)}),t.groupIds=t.groupIds.join(","),t.examineeIds=t.examineeIds.join(","),this.$store.dispatch("GetConnect",{url:"exam/examineeGroup",data:t}).then(function(t){e.$message.success(t.msg),e.dialogVisible=!1,e.getData()}).catch(function(t){e.$message.error(t.msg)})}}}},r=(a("c68b"),a("KHd+")),l=Object(r.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container bg-gray"},[a("el-card",{staticClass:"box-1"},[a("el-tabs",{on:{"tab-click":e.handleTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"考生-员工",name:"admin"}},[a("div",{staticClass:"header"},[a("div",[a("el-select",{staticClass:"select",attrs:{placeholder:"考生分组",clearable:""},on:{change:e.getData},model:{value:e.searchTerms.typeId,callback:function(t){e.$set(e.searchTerms,"typeId",t)},expression:"searchTerms.typeId"}},e._l(e.teamList.admin,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),e._v(" "),a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入考生名称"},on:{change:e.getData},model:{value:e.searchTerms.searchValue,callback:function(t){e.$set(e.searchTerms,"searchValue",t)},expression:"searchTerms.searchValue"}}),e._v(" "),a("el-button",{staticClass:"do-btn",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.getData}},[e._v("搜索")])],1),e._v(" "),a("div",[e.queryMatch(192)?a("el-button",{attrs:{type:"warning"},on:{click:e.toAddToTeam}},[e._v("添加到分组")]):e._e(),e._v(" "),e.queryMatch(193)?a("el-button",{attrs:{type:"primary"},on:{click:e.toManageTeam}},[e._v("分组管理")]):e._e()],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"multipleTable",attrs:{data:e.tableData,"max-height":e.tableMaxHeight,border:"","highlight-current-row":""},on:{"sort-change":e.handleSortChange,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"100","header-align":"center",align:"center",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名","min-width":"120","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别","min-width":"100","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机","min-width":"140","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱","min-width":"160","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"position",label:"部门","min-width":"140","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"group_name",label:"分组",width:"320","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.group_name,function(t){return a("el-tag",{key:t,staticStyle:{margin:"2px"},attrs:{type:"warning"}},[e._v(e._s(t))])})}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"220","header-align":"center",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search",circle:""},on:{click:function(a){e.toExamineeInfo(t.row)}}}),e._v(" "),e.queryMatch(192)?a("el-tooltip",{attrs:{placement:"top",content:"添加到分组"}},[a("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-share",circle:""},on:{click:function(a){e.toSingerAddToTeam(t.row)}}})],1):e._e()]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":e.pageSizes,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(t){e.currentPage=t},"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"考生-客户",name:"member"}},[a("div",{staticClass:"header"},[a("div",[a("el-select",{staticClass:"select",attrs:{placeholder:"考生分组",clearable:""},on:{change:e.getData},model:{value:e.searchTerms.typeId,callback:function(t){e.$set(e.searchTerms,"typeId",t)},expression:"searchTerms.typeId"}},e._l(e.teamList.member,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),e._v(" "),a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入考试名称"},on:{change:e.getData},model:{value:e.searchTerms.searchValue,callback:function(t){e.$set(e.searchTerms,"searchValue",t)},expression:"searchTerms.searchValue"}}),e._v(" "),a("el-button",{staticClass:"do-btn",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.getData}},[e._v("搜索")])],1),e._v(" "),a("div",[a("el-button",{attrs:{type:"warning"},on:{click:e.toAddToTeam}},[e._v("添加到分组")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.toManageTeam}},[e._v("分组管理")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"multipleTable",attrs:{data:e.tableData,"max-height":e.tableMaxHeight,border:"","highlight-current-row":""},on:{"sort-change":e.handleSortChange,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"100","header-align":"center",align:"center",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名","min-width":"120","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"level",label:"客户等级","min-width":"100","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机","min-width":"140","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱","min-width":"160","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"company",label:"公司","min-width":"140","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"group_name",label:"分组",width:"320","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.group_name,function(t){return a("el-tag",{key:t,staticStyle:{margin:"2px"},attrs:{type:"warning"}},[e._v(e._s(t))])})}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"220","header-align":"center",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search",circle:""},on:{click:function(a){e.toExamineeInfo(t.row)}}}),e._v(" "),a("el-tooltip",{attrs:{placement:"top",content:"添加到分组"}},[a("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-share",circle:""},on:{click:function(a){e.toSingerAddToTeam(t.row)}}})],1)]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":e.pageSizes,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(t){e.currentPage=t},"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1)],1),e._v(" "),a("el-dialog",{staticClass:"dialog",attrs:{visible:e.dialogVisible,title:"考生分组",width:"500px",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"content"},[a("div",{staticClass:"text"},[e._v("将所选 "+e._s(e.multipleSelection.length)+" 位用户添加至")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择分组",filterable:"",multiple:""},model:{value:e.transfer.groupIds,callback:function(t){e.$set(e.transfer,"groupIds",t)},expression:"transfer.groupIds"}},e._l("admin"===e.activeName?e.teamList.admin:e.teamList.member,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})}))],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.doTransfer}},[e._v("确 定")])],1)])],1)},[],!1,null,"159c9acf",null);l.options.__file="list.vue";t.default=l.exports},V3Eu:function(e,t,a){},c68b:function(e,t,a){"use strict";var n=a("V3Eu");a.n(n).a},"zAZ/":function(e,t,a){"use strict";a.d(t,"e",function(){return r}),a.d(t,"c",function(){return l}),a.d(t,"d",function(){return s}),a.d(t,"a",function(){return o}),a.d(t,"f",function(){return c}),a.d(t,"b",function(){return d});var n=a("EJiy"),i=a.n(n);function r(e){var t=e.column,a=e.prop,n=e.order;this.order={column:t,prop:a,order:n},this.getData({sortName:a,sortOrder:n&&("ascending"===n?"asc":"desc")})}function l(e){this.getData(this.order?{sortName:this.order.prop,sortOrder:this.order.order&&("ascending"===this.order.order?"asc":"desc")}:{})}function s(e){this.$store.getters.userInfo.pageSize=e,this.pageSize=e,this.getData(this.order?{sortName:this.order.prop,sortOrder:this.order.order&&("ascending"===this.order.order?"asc":"desc")}:{})}function o(e){this.th[e].check=!this.th[e].check}function c(e,t){if(0===arguments.length)return null;var a=t||"{y}-{m}-{d} {h}:{i}:{s}",n=void 0;"object"===(void 0===e?"undefined":i()(e))?n=e:(10===(""+e).length&&(e=1e3*parseInt(e)),n=new Date(e));var r={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()};return a.replace(/{(y|m|d|h|i|s|a)+}/g,function(e,t){var a=r[t];return"a"===t?["日","一","二","三","四","五","六"][a]:(e.length>0&&a<10&&(a="0"+a),a||0)})}function d(e){var t=e.substr(0,10);t=t.replace(/-/g,"/");var a=new Date(t),n=new Date;n=n.valueOf();var i=Math.ceil((a-n)/864e5);return 0===i?"今天":i>0&&i<30?i+"天":i>=30&&i<360?Math.ceil(i/30)+"月":i>=360?Math.ceil(i/360)+"年":"逾期"+Math.ceil((n-a)/864e5)+"天"}}}]);