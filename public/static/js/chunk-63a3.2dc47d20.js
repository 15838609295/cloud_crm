(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-63a3"],{"7Qib":function(t,e,a){"use strict";a.d(e,"d",function(){return c}),a.d(e,"a",function(){return d}),a.d(e,"c",function(){return h});var r=a("14Xm"),n=a.n(r),s=a("D3Ub"),i=a.n(s),o=(a("4d7F"),a("EJiy")),l=a.n(o);function c(t,e){if(0===arguments.length)return null;var a=e||"{y}-{m}-{d} {h}:{i}:{s}",r=void 0;"object"===(void 0===t?"undefined":l()(t))?r=t:(10===(""+t).length&&(t=1e3*parseInt(t)),r=new Date(t));var n={y:r.getFullYear(),m:r.getMonth()+1,d:r.getDate(),h:r.getHours(),i:r.getMinutes(),s:r.getSeconds(),a:r.getDay()};return a.replace(/{(y|m|d|h|i|s|a)+}/g,function(t,e){var a=n[e];return"a"===e?["日","一","二","三","四","五","六"][a]:(t.length>0&&a<10&&(a="0"+a),a||0)})}function d(t,e,a){var r=void 0,n=void 0,s=void 0,i=void 0,o=void 0,l=function l(){var c=+new Date-i;c<e&&c>0?r=setTimeout(l,e-c):(r=null,a||(o=t.apply(s,n),r||(s=n=null)))};return function(){for(var n=arguments.length,c=Array(n),d=0;d<n;d++)c[d]=arguments[d];s=this,i=+new Date;var h=a&&!r;return r||(r=setTimeout(l,e)),h&&(o=t.apply(s,c),s=c=null),o}}function h(t){var e=void 0,a=t.split("-"),r=parseInt(a[0]),n=parseInt(a[1]),s=parseInt(a[2]),i=new Date,o=i.getFullYear(),l=i.getMonth()+1,c=i.getDate();if(o===r)e=0;else{var d=o-r;if(d>0)if(l===n)e=c-s<0?d-1:d;else e=l-n<0?d-1:d;else e=-1}return e}e.b=function(){var t=i()(n.a.mark(function t(e,a,r){var s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),(s=new Image).src=e,t.next=5,s.onload;case 5:if(console.log(s.width,s.height),a/r!=s.width/s.height){t.next=8;break}return t.abrupt("return",s.width+"px * "+s.height+"px");case 8:return t.abrupt("return",!1);case 9:case"end":return t.stop()}},t,this)}));return function(e,a,r){return t.apply(this,arguments)}}()},H4L4:function(t,e,a){"use strict";a.r(e);var r=a("P2sY"),n=a.n(r),s=a("MT78"),i=a.n(s),o=a("7Qib");a("gX0l");var l={props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},chartData:{type:Object,required:!0,default:function(){return{title:"示例",data:[{value:335,name:"已付款"},{value:310,name:"待付款"},{value:234,name:"作废"}]}}}},data:function(){return{chart:null}},watch:{chartData:{deep:!0,handler:function(t){this.setOptions(t)}}},mounted:function(){var t=this;this.initChart(),this.__resizeHandler=Object(o.a)(function(){t.chart&&t.chart.resize()},100),window.addEventListener("resize",this.__resizeHandler)},beforeDestroy:function(){this.chart&&(window.removeEventListener("resize",this.__resizeHandler),this.chart.dispose(),this.chart=null)},methods:{setOptions:function(t){this.chart.setOption({title:{text:t.title,subtext:"",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:t.data},series:[{name:t.title,type:"pie",radius:"55%",center:["50%","60%"],data:t.data,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})},initChart:function(){this.chart=i.a.init(this.$el,"macarons"),this.setOptions(this.chartData)}}},c=a("KHd+"),d=Object(c.a)(l,function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.className,style:{height:this.height,width:this.width}})},[],!1,null,null,null);d.options.__file="PieChart.vue";var h=d.exports,u=a("zAZ/"),g={components:{PieChart:h},data:function(){return{select:0,info:{exam_end_number:0,test_paper_number:0,new_member:0,showChartData:{title:"7日订单指标",data:[{value:0,name:"及格"},{value:0,name:"不及格"}],list:{exam_number:0,exam_result_number:0,average_time:0,pass_rate:0,pass_number:0,fail:0}},chartData:[]},searchDate:[],tableMaxHeight:600,tableLoading:!1,multipleSelection:[],currentPage:1,pageSize:this.$store.getters.userInfo.pageSize,pageSizes:[10,20,50,100,1e3],total:0,tableData:[]}},watch:{select:{handler:function(t){this.info.showChartData=this.info.chartData[t]}}},created:function(){this.loadData(),this.getData()},methods:{handleCurrentChange:u.c,handleSizeChange:u.d,handleSortChange:u.e,loadData:function(){var t=this;this.$store.dispatch("GetConnect",{url:"workorder/workOrderStatistics"}).then(function(e){var a=e.data||{};a.showChartData=e.data.chartData[0],n()(t.info,a)}).catch(function(e){t.$message.error(e.msg||"系统错误")})},getData:function(t){var e=this;this.tableLoading=!0,t||(t={});var a={pageNo:this.currentPage,pageSize:this.pageSize};this.searchDate&&0!==this.searchDate.length&&(a.startTime=this.searchDate[0]+" 00:00:00",a.endTime=this.searchDate[1]+" 23:59:59"),t.sortName&&(a.sortName=t.sortName),t.sortOrder&&(a.sortOrder=t.sortOrder),this.$store.dispatch("GetConnect",{url:"workorder/workOrderSelect",data:a}).then(function(t){e.tableData=t.data.rows,e.total=t.data.total,e.tableLoading=!1}).catch(function(t){e.tableLoading=!1,e.$message.error(t.msg+",请刷新或联系管理员")})},toExportData:function(){this.downloadLoading=!0;var t=this.$store.getters.serverUrl+"/admin/workorder/workOrderSelectToExcel?token="+this.$store.getters.token;this.searchDate&&0!==this.searchDate.length&&(t=t+"&startTime="+this.searchDate[0]+" 00:00:00&endTime="+this.searchDate[1]+" 23:59:59"),window.open(t),this.downloadLoading=!1}}},p=(a("rL6l"),Object(c.a)(g,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container bg-gray"},[a("el-col",{attrs:{xs:24,sm:24,md:20,lg:20,xl:20}},[a("el-card",[a("div",{staticClass:"model-data"},[a("div",{staticClass:"item"},[a("span",[t._v("反馈总数")]),t._v(" "),a("div",[a("span",{staticClass:"num"},[t._v(t._s(t.info.total_order))]),a("span",[t._v("次")])]),t._v(" "),a("router-link",{attrs:{to:"/workOrder/feedback"}},[a("el-button",{attrs:{size:"mini",type:"text"}},[t._v("详情")])],1)],1),t._v(" "),a("div",{staticClass:"item"},[a("span",[t._v("已处理反馈")]),t._v(" "),a("div",[a("span",{staticClass:"num"},[t._v(t._s(t.info.complete_order))]),a("span",[t._v("张")])]),t._v(" "),a("router-link",{attrs:{to:"/workOrder/feedback"}},[a("el-button",{attrs:{size:"mini",type:"text"}},[t._v("详情")])],1)],1),t._v(" "),a("div",{staticClass:"item"},[a("span",[t._v("新增反馈")]),t._v(" "),a("div",[a("span",{staticClass:"num"},[t._v(t._s(t.info.newly_added_order))]),a("span",[t._v("人")])]),t._v(" "),a("router-link",{attrs:{to:"/workOrder/feedback"}},[a("el-button",{attrs:{size:"mini",type:"text"}},[t._v("详情")])],1)],1)])])],1),t._v(" "),a("el-col",{staticClass:"margin-top-20",attrs:{xs:24,sm:24,md:20,lg:20,xl:20}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("各项指标")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form",{attrs:{"label-width":"140px"}},[a("el-form-item",{attrs:{label:"群众反馈数量"}},[t._v(t._s(t.info.showChartData.list.member_feedback))]),t._v(" "),a("el-form-item",{attrs:{label:"网格员签收数"}},[t._v(t._s(t.info.showChartData.list.sign_for))]),t._v(" "),a("el-form-item",{attrs:{label:"网格员处理数"}},[t._v(t._s(t.info.showChartData.list.admin_feedback))]),t._v(" "),a("el-form-item",{attrs:{label:"完成率"}},[t._v(t._s(t.info.showChartData.list.completion_rate))]),t._v(" "),t._l(t.info.showChartData.data,function(e){return a("el-form-item",{key:e.name,attrs:{label:e.name}},[t._v("\n            "+t._s(e.value)+"\n          ")])})],2)],1),t._v(" "),a("el-col",{attrs:{span:16,align:"center"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},[a("el-radio-button",{attrs:{label:0}},[t._v("全部反馈完成率")]),t._v(" "),a("el-radio-button",{attrs:{label:1}},[t._v("7日反馈完成率")]),t._v(" "),a("el-radio-button",{attrs:{label:2}},[t._v("15日反馈完成率")]),t._v(" "),a("el-radio-button",{attrs:{label:3}},[t._v("30日反馈完成率")])],1),t._v(" "),a("pie-chart",{staticClass:"margin-top-20",attrs:{"chart-data":t.info.showChartData}})],1)],1)],1),t._v(" "),a("el-col",{staticClass:"margin-top-20",attrs:{xs:24,sm:24,md:20,lg:20,xl:20}},[a("el-card",[a("div",{staticClass:"header"},[a("div",{staticClass:"title"},[a("el-date-picker",{staticClass:"picker",attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.getData},model:{value:t.searchDate,callback:function(e){t.searchDate=e},expression:"searchDate"}}),t._v(" "),a("el-button",{staticClass:"bg-green",staticStyle:{float:"right"},attrs:{type:"success",size:"small"},on:{click:t.toExportData}},[t._v("导出数据")])],1)]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticClass:"margin-top-20",attrs:{data:t.tableData,"max-height":t.tableMaxHeight,border:"","row-class-name":"cursor-p"},on:{"sort-change":t.handleSortChange}},[a("el-table-column",{attrs:{prop:"time",label:"时间","min-width":"120","header-align":"center",align:"center",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"total",label:"反馈数量(单)","min-width":"120","header-align":"center",align:"center",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"accept",label:"网格员签收量(单)","min-width":"120","header-align":"center",align:"center",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"solve",label:"网格员反馈量(单)","min-width":"120","header-align":"center",align:"center",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"solve_rate",label:"完成率","min-width":"110","header-align":"center",align:"center",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:"success"}},[t._v(t._s(e.row.solve_rate)+"%")])]}}])})],1),t._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{"current-page":t.currentPage,"page-size":t.pageSize,"page-sizes":t.pageSizes,total:t.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(e){t.currentPage=e},"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)],1),t._v(" "),a("el-col",{staticStyle:{height:"60px"}})],1)},[],!1,null,"b90ed37c",null));p.options.__file="index.vue";e.default=p.exports},rL6l:function(t,e,a){"use strict";var r=a("sXa2");a.n(r).a},sXa2:function(t,e,a){},"zAZ/":function(t,e,a){"use strict";a.d(e,"e",function(){return s}),a.d(e,"c",function(){return i}),a.d(e,"d",function(){return o}),a.d(e,"a",function(){return l}),a.d(e,"f",function(){return c}),a.d(e,"b",function(){return d});var r=a("EJiy"),n=a.n(r);function s(t){var e=t.column,a=t.prop,r=t.order;this.order={column:e,prop:a,order:r},this.getData({sortName:a,sortOrder:r&&("ascending"===r?"asc":"desc")})}function i(t){this.getData(this.order?{sortName:this.order.prop,sortOrder:this.order.order&&("ascending"===this.order.order?"asc":"desc")}:{})}function o(t){this.$store.getters.userInfo.pageSize=t,this.pageSize=t,this.getData(this.order?{sortName:this.order.prop,sortOrder:this.order.order&&("ascending"===this.order.order?"asc":"desc")}:{})}function l(t){this.th[t].check=!this.th[t].check}function c(t,e){if(0===arguments.length)return null;var a=e||"{y}-{m}-{d} {h}:{i}:{s}",r=void 0;"object"===(void 0===t?"undefined":n()(t))?r=t:(10===(""+t).length&&(t=1e3*parseInt(t)),r=new Date(t));var s={y:r.getFullYear(),m:r.getMonth()+1,d:r.getDate(),h:r.getHours(),i:r.getMinutes(),s:r.getSeconds(),a:r.getDay()};return a.replace(/{(y|m|d|h|i|s|a)+}/g,function(t,e){var a=s[e];return"a"===e?["日","一","二","三","四","五","六"][a]:(t.length>0&&a<10&&(a="0"+a),a||0)})}function d(t){var e=t.substr(0,10);e=e.replace(/-/g,"/");var a=new Date(e),r=new Date;r=r.valueOf();var n=Math.ceil((a-r)/864e5);return 0===n?"今天":n>0&&n<30?n+"天":n>=30&&n<360?Math.ceil(n/30)+"月":n>=360?Math.ceil(n/360)+"年":"逾期"+Math.ceil((r-a)/864e5)+"天"}}}]);