(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2c5d"],{"0ejl":function(e,t,r){},BN7A:function(e,t,r){"use strict";r.r(t);var a={data:function(){var e=this;return{title:"",pageType:0,usersList:[],goodsList:[],ruleList:[],form:{},formRules:{commission_before:[{validator:function(t,r,a){""===r&&1===e.form.isCommission?a(new Error("请输入售前提成金额")):a()},trigger:"blur"}]}}},watch:{},created:function(){this.title=this.$route.query.title,this.$route.query.id&&(this.id=this.$route.query.id),this.$route.query.id&&this.getData(),this.getUsersList(),this.getGoodsList(),this.getRuleList(),"售后订单-详情"===this.title?this.pageType=0:this.pageType=1},methods:{getData:function(){var e=this,t="aftersale/detail/"+this.id;this.$store.dispatch("GetConnect",{url:t}).then(function(t){e.form=t.data}).catch(function(t){e.$message.error(t.msg+",请刷新或联系管理员")})},getUsersList:function(){var e=this;this.$store.dispatch("GetConnect",{url:"user/all-list"}).then(function(t){e.usersList=t.data}).catch(function(t){e.$message.error(t.msg+",请刷新或联系管理员")})},getGoodsList:function(){var e=this;this.$store.dispatch("GetConnect",{url:"goods/all-list"}).then(function(t){e.goodsList=t.data}).catch(function(t){e.$message.error(t.msg+",请刷新或联系管理员")})},getRuleList:function(){var e=this;this.$store.dispatch("GetConnect",{url:"salerule/all-list"}).then(function(t){e.ruleList=t.data}).catch(function(t){e.$message.error(t.msg+",请刷新或联系管理员")})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var r=t.form,a=t.id?"aftersale/edit/"+t.id:"aftersale/create";t.$store.dispatch("GetConnect",{url:a,data:r}).then(function(e){t.$message.success(e.msg),t.$router.back(-1)}).catch(function(e){t.$message.error(e.msg)})}else t.$message.error("提交失败,请检查必填项")})}}},o=(r("wSKb"),r("KHd+")),s=Object(o.a)(a,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-1"},[r("div",{attrs:{slot:"header"},slot:"header"},[r("span",[e._v(e._s(e.title))])]),e._v(" "),r("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"160px"}},[r("el-form-item",{attrs:{label:"售后人员"}},[r("el-select",{attrs:{disabled:0==e.pageType,placeholder:"请选择售后人员",filterable:""},model:{value:e.form.after_sale_id,callback:function(t){e.$set(e.form,"after_sale_id",t)},expression:"form.after_sale_id"}},e._l(e.usersList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"客户名称"}},[r("el-input",{attrs:{readonly:"售后订单-创建"!==e.title},model:{value:e.form.member_name,callback:function(t){e.$set(e.form,"member_name",t)},expression:"form.member_name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"客户手机",prop:"member_phone"}},[r("el-input",{attrs:{readonly:"售后订单-创建"!==e.title},model:{value:e.form.member_phone,callback:function(t){e.$set(e.form,"member_phone",t)},expression:"form.member_phone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"商品"}},[r("el-select",{attrs:{disabled:0==e.pageType,placeholder:"请选择商品",filterable:""},model:{value:e.form.goods_name,callback:function(t){e.$set(e.form,"goods_name",t)},expression:"form.goods_name"}},e._l(e.goodsList,function(e){return r("el-option",{key:e.id,attrs:{label:e.goods_name,value:e.goods_name}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"价格",prop:"goods_price"}},[r("el-input",{attrs:{readonly:0==e.pageType},model:{value:e.form.goods_money,callback:function(t){e.$set(e.form,"goods_money",t)},expression:"form.goods_money"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"订单号",prop:"order_num"}},[r("el-input",{attrs:{readonly:0==e.pageType},model:{value:e.form.order_number,callback:function(t){e.$set(e.form,"order_number",t)},expression:"form.order_number"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"购买时间"}},[r("el-date-picker",{attrs:{readonly:0==e.pageType,"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.buy_time,callback:function(t){e.$set(e.form,"buy_time",t)},expression:"form.buy_time"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"购买时长",prop:"term"}},[r("el-input",{attrs:{readonly:0==e.pageType},model:{value:e.form.buy_length,callback:function(t){e.$set(e.form,"buy_length",t)},expression:"form.buy_length"}}),e._v(" "),r("div",{staticClass:"remark"},[e._v("*注:时长是按月计算")])],1),e._v(" "),r("el-form-item",{attrs:{label:"是否有提成"}},[r("el-radio-group",{attrs:{disabled:0==e.pageType},model:{value:e.form.after_type,callback:function(t){e.$set(e.form,"after_type",t)},expression:"form.after_type"}},[r("el-radio",{attrs:{label:0}},[e._v("有提成")]),e._v(" "),r("el-radio",{attrs:{label:2}},[e._v("固定提成")]),e._v(" "),r("el-radio",{attrs:{label:1}},[e._v("无提成")])],1)],1),e._v(" "),0===e.form.after_type?r("el-form-item",{attrs:{label:"提成规则"}},[r("el-select",{attrs:{disabled:0==e.pageType,placeholder:"请选择提成规则"},model:{value:e.form.sbr_id,callback:function(t){e.$set(e.form,"sbr_id",t)},expression:"form.sbr_id"}},e._l(e.ruleList,function(e){return r("el-option",{key:e.id,attrs:{label:e.rule_name,value:e.id}})}))],1):e._e(),e._v(" "),2===e.form.after_type?r("el-form-item",{attrs:{label:"固定提成金额",prop:"after_money"}},[r("el-input",{attrs:{readonly:0==e.pageType},model:{value:e.form.after_money,callback:function(t){e.$set(e.form,"after_money",t)},expression:"form.after_money"}})],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{attrs:{readonly:0==e.pageType,type:"textarea",rows:"4"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1),e._v(" "),0!=e.pageType?r("div",{staticStyle:{"text-align":"center"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v("保存")])],1):e._e(),e._v(" "),0==e.pageType&&e.queryMatch(96)?r("div",{staticStyle:{"text-align":"center"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.pageType=1}}},[e._v("编辑")])],1):e._e()],1)],1)],1)},[],!1,null,"a8d5e5d2",null);s.options.__file="modify.vue";t.default=s.exports},wSKb:function(e,t,r){"use strict";var a=r("0ejl");r.n(a).a}}]);