(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4df0"],{qOfN:function(e,t,r){},smhC:function(e,t,r){"use strict";var i=r("qOfN");r.n(i).a},z8aN:function(e,t,r){"use strict";r.r(t);var i={data:function(){return{title:"",ImageUrl:"",fileList:[],typeList:[],form:{read_power:0,is_display:0,articles_type_id:""},formRules:{title:[{required:!0,message:"请输入信息标题",trigger:"blur"}],articles_type_id:[{required:!0,message:"选择信息类型",trigger:"blur"}]}}},created:function(){this.title=this.$route.query.title,this.loadTypeList()},methods:{loadTypeList:function(){var e=this;this.$store.dispatch("GetConnect",{url:"lookarticles/allTypeList"}).then(function(t){e.typeList=t.data,e.$route.query.id?(e.id=e.$route.query.id,e.getNews(e.$route.query.id)):e.form.articles_type_id=e.$route.query.typeId||""}).catch(function(t){e.$message.error(t.msg+",请刷新或联系管理员")})},getNews:function(e){var t=this,r="article/detail/"+e;this.$store.dispatch("GetConnect",{url:r}).then(function(e){t.form=e.data}).catch(function(e){t.$message.error(e.msg+",请刷新或联系管理员")})},handleAvatarChange:function(e){window.URL=window.URL||window.webkitURL;var t=e.name;/(.jpg|.jpeg|.gif|.png|.bmp)$/.test(t.toLowerCase())?this.form.thumb=window.URL.createObjectURL(e.raw):this.$message.error("请选择图片文件")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var r=t.form;r.typeid=1;var i=t.id?"article/edit/"+t.id:"article/create";t.$store.dispatch("GetConnect",{url:i,data:r}).then(function(e){t.$message.success(e.msg),t.$router.back(-1)}).catch(function(e){t.$message.error(e.msg)})}else t.$message.error("提交失败,请检查必填项")})},resetForm:function(e){this.$refs[e].resetFields()}}},a=(r("smhC"),r("KHd+")),o=Object(a.a)(i,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-1"},[r("div",{attrs:{slot:"header"},slot:"header"},[r("span",[e._v(e._s(e.title))])]),e._v(" "),r("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"160px"}},[r("el-form-item",{attrs:{label:"信息标题：",prop:"title"}},[r("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"信息类型：",prop:"articles_type_id"}},[r("el-select",{staticClass:"select",attrs:{placeholder:"信息类型",clearable:"",filterable:""},model:{value:e.form.articles_type_id,callback:function(t){e.$set(e.form,"articles_type_id",t)},expression:"form['articles_type_id']"}},e._l(e.typeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"略缩图："}},[r("div",{staticClass:"remark"},[e._v("*注:为保证显示效果,请上传一张750px*400px的图片")]),e._v(" "),r("ws-upload-single-img",{attrs:{path:e.form.thumb?e.ImageUrl+e.form.thumb:""},model:{value:e.form.thumb,callback:function(t){e.$set(e.form,"thumb",t)},expression:"form['thumb']"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"简介："}},[r("el-input",{attrs:{type:"textarea",rows:"3"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"文章详情"}},[r("ws-editor",{model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form['content']"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"查看权限",prop:"unit"}},[r("el-select",{attrs:{placeholder:"请选择查看权限"},model:{value:e.form.read_power,callback:function(t){e.$set(e.form,"read_power",t)},expression:"form.read_power"}},[r("el-option",{attrs:{value:0,label:"全部"}}),e._v(" "),r("el-option",{attrs:{value:1,label:"内部"}}),e._v(" "),r("el-option",{attrs:{value:2,label:"外部"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否显示"}},[r("el-radio-group",{model:{value:e.form.is_display,callback:function(t){e.$set(e.form,"is_display",t)},expression:"form.is_display"}},[r("el-radio",{attrs:{label:0}},[e._v("显示")]),e._v(" "),r("el-radio",{attrs:{label:1}},[e._v("隐藏")])],1)],1),e._v(" "),r("div",{staticStyle:{"text-align":"center"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v("保存")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.$router.back(-1)}}},[e._v("取消")])],1)],1)],1)],1)},[],!1,null,"b7042a5e",null);o.options.__file="modify.vue";t.default=o.exports}}]);