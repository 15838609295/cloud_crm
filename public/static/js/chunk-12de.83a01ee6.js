(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-12de"],{"35K3":function(e,t,n){"use strict";n.r(t);var a=n("P2sY"),r=n.n(a),i=n("7f3+"),o=n("zAZ/"),s={components:{LineChart:i.a},data:function(){return{isShow:!1,loading:!1,activeName:"",departmentList:[],lineChartData:[],info:{customer_list:[],customer_number:[],order_from:[]},currentPage:1,pageSize:this.$store.getters.userInfo.pageSize,total:30,tableData:[]}},watch:{$route:function(e){"部门运营数据"===e.name&&(this.isShow=!0,this.getDepartmentList())}},created:function(){"部门运营数据"===this.$route.name&&(this.isShow=!0,this.getDepartmentList())},methods:{handleCurrentChange:o.c,handleSizeChange:o.d,handleSortChange:o.e,columnCheck:o.a,parseTime:o.f,handleClick:function(){this.getDepartmentData(),this.getDepartmentMemberData()},getDepartmentList:function(){var e=this;this.$store.dispatch("GetConnect",{url:"company/all-list"}).then(function(t){e.departmentList=t.data,e.activeName=t.data[0]&&t.data[0].id+"",e.getDepartmentData(),e.getDepartmentMemberData()}).catch(function(t){e.$message.error(t.msg+",请刷新或联系管理员")})},getDepartmentData:function(){var e=this;this.loading=!0;var t={id:this.activeName};this.$store.dispatch("GetConnect",{url:"platform/company",data:t}).then(function(t){e.loading=!1,r()(e.info,t.data)}).catch(function(t){e.loading=!1,e.$message.error(t.msg+",请刷新或联系管理员")})},getDepartmentMemberData:function(){var e=this,t={id:this.activeName};this.$store.dispatch("GetConnect",{url:"platform/companyUserList",data:t}).then(function(t){e.tableData=t.data}).catch(function(t){e.$message.error(t.msg+",请刷新或联系管理员")})},memberClick:function(e){this.isShow=!1,this.$router.push({path:"/workbench/operation/department/personalty",query:{id:e.id,name:e.name}})}}},l=(n("UDkW"),n("KHd+")),c=Object(l.a)(s,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[n("router-view")],1),e._v(" "),e.isShow?n("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.departmentList,function(t,a){return n("el-tab-pane",{key:a,attrs:{label:t.name,name:t.id+""}},[n("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[e.activeName===t.id.toString()?n("el-row",{staticClass:"box-1"},[n("el-row",{staticClass:"header"},[n("div",{staticClass:"text-center"},[e._v("运营概况")])]),e._v(" "),n("el-row",{staticClass:"row"},[n("el-col",{attrs:{span:4}},[n("div",[e._v("今日客户量")]),e._v(" "),n("div",[e._v(e._s(e.info.today_customer||0))])]),e._v(" "),n("el-col",{attrs:{span:4}},[n("div",[e._v("本月客户量")]),e._v(" "),n("div",[e._v(e._s(e.info.month_customer||0))])]),e._v(" "),n("el-col",{attrs:{span:4}},[n("div",[e._v("本月业绩")]),e._v(" "),n("div",[e._v(e._s(e.info.month_bonus_number||0))])]),e._v(" "),n("el-col",{attrs:{span:4}},[n("div",[e._v("本月成单量")]),e._v(" "),n("div",[e._v(e._s(e.info.month_member||0))])]),e._v(" "),n("el-col",{attrs:{span:4}},[n("div",[e._v("本月成单率")]),e._v(" "),n("div",[e._v(e._s(e.info.month_conversion||0)+"%")])]),e._v(" "),n("el-col",{attrs:{span:4}},[n("div",[e._v("本月丢单率")]),e._v(" "),n("div",[e._v(e._s(e.info.month_no_conversion||0)+"%")])])],1),e._v(" "),n("el-row",{staticClass:"row"},[n("el-col",{attrs:{span:4}},[n("div",[e._v("昨日客户量")]),e._v(" "),n("div",[e._v(e._s(e.info.yesterday_customer||0))])]),e._v(" "),n("el-col",{attrs:{span:4}},[n("div",[e._v("上月客户量")]),e._v(" "),n("div",[e._v(e._s(e.info.last_month_customer||0))])]),e._v(" "),n("el-col",{attrs:{span:4}},[n("div",[e._v("上月业绩")]),e._v(" "),n("div",[e._v(e._s(e.info.last_month_bonus_number||0))])]),e._v(" "),n("el-col",{attrs:{span:4}},[n("div",[e._v("上月成单量")]),e._v(" "),n("div",[e._v(e._s(e.info.last_month_member||0))])]),e._v(" "),n("el-col",{attrs:{span:4}},[n("div",[e._v("总成单率")]),e._v(" "),n("div",[e._v(e._s(e.info.conversion||0)+"%")])]),e._v(" "),n("el-col",{attrs:{span:4}},[n("div",[e._v("总丢单率")]),e._v(" "),n("div",[e._v(e._s(e.info.no_conversion||0)+"%")])])],1),e._v(" "),n("el-table",{attrs:{data:e.info.source,"max-height":"250"}},[n("el-table-column",{attrs:{label:"不同来源客户概况","header-align":"center",align:"center"}},[n("el-table-column",{attrs:{label:"来源",prop:"source_name","header-align":"center",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"本日数量",prop:"today_customer","header-align":"center",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"昨日数量",prop:"yesterday_customer","header-align":"center",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"本月数量",prop:"month_customer","header-align":"center",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"上月数量",prop:"last_month_customer","header-align":"center",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"本月成单率",prop:"month_conversion","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(t.row.month_conversion||0)+"%\n                ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"本月丢单率",prop:"month_no_conversion","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(t.row.month_no_conversion||0)+"%\n                ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"总成单率",prop:"conversion","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(t.row.conversion||0)+"%\n                ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"总丢单率",prop:"no_conversion","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(t.row.no_conversion||0)+"%\n                ")]}}])})],1)],1)],1):e._e()],1),e._v(" "),n("div",{staticClass:"lineChartBox"},[n("el-row",{attrs:{gutter:32}},[n("el-col",{attrs:{xs:24,sm:24,md:24,lg:8,xl:8}},[n("el-card",[n("div",{staticClass:"text-center",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("客户量 - 曲线图")])]),e._v(" "),n("line-chart",{attrs:{"chart-data":e.info.customer_list}})],1)],1),e._v(" "),n("el-col",{attrs:{xs:24,sm:24,md:24,lg:8,xl:8}},[n("el-card",[n("div",{staticClass:"text-center",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("业绩 - 曲线图")])]),e._v(" "),n("line-chart",{attrs:{"chart-data":e.info.customer_number}})],1)],1),e._v(" "),n("el-col",{attrs:{xs:24,sm:24,md:24,lg:8,xl:8}},[n("el-card",[n("div",{staticClass:"text-center",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("成单率/丢单率 - 曲线图（%）")])]),e._v(" "),n("line-chart",{attrs:{"chart-data":e.info.order_from}})],1)],1)],1)],1),e._v(" "),n("el-row",{staticClass:"box-2"},[n("el-col",{attrs:{span:24}},[n("el-card",{attrs:{shadow:"hover"}},[n("div",{staticClass:"header"},[n("div",{staticClass:"title"},[e._v("成员列表")])]),e._v(" "),n("el-table",{attrs:{data:e.tableData,border:"","row-class-name":"cursor-p"},on:{"cell-click":e.memberClick}},[n("el-table-column",{attrs:{prop:"name",label:"姓名","min-width":"120","header-align":"center",align:"center",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"today_customer",label:"今日客户","min-width":"110","header-align":"center",align:"center",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"yesterday_customer",label:"昨日客户","min-width":"110","header-align":"center",align:"center",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"month_customer",label:"本月客户","min-width":"110","header-align":"center",align:"center",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"last_customer_number",label:"上月客户","min-width":"110","header-align":"center",align:"center",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"month_conversion",label:"本月成单率","min-width":"120","header-align":"center",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.row.month_conversion)+"%")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"month_no_conversion",label:"本月丢单率","min-width":"120","header-align":"center",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.row.month_no_conversion)+"%")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"conversion",label:"总成单率","min-width":"110","header-align":"center",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.row.conversion)+"%")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"no_conversion",label:"总丢单率","min-width":"110","header-align":"center",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.row.no_conversion)+"%")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"yesterday_bonus_number",label:"昨日业绩","min-width":"110","header-align":"center",align:"center",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"today_bonus_number",label:"今日业绩","min-width":"110","header-align":"center",align:"center",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"last_bonus_number",label:"上月业绩","min-width":"110","header-align":"center",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:"primary"}},[e._v(e._s(t.row.last_bonus_number))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"month_bonus_number",label:"本月业绩","min-width":"110","header-align":"center",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:"primary"}},[e._v(e._s(t.row.month_bonus_number))])]}}])})],1),e._v(" "),n("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.currentPage,"page-size":e.pageSize,total:e.total,layout:"total, prev, pager, next, jumper"},on:{"update:currentPage":function(t){e.currentPage=t},"current-change":e.handleCurrentChange}})],1)],1)],1)],1)})):e._e()],1)},[],!1,null,"72d0088a",null);c.options.__file="index.vue";t.default=c.exports},"7Qib":function(e,t,n){"use strict";n.d(t,"d",function(){return c}),n.d(t,"a",function(){return d}),n.d(t,"c",function(){return u});var a=n("14Xm"),r=n.n(a),i=n("D3Ub"),o=n.n(i),s=(n("4d7F"),n("EJiy")),l=n.n(s);function c(e,t){if(0===arguments.length)return null;var n=t||"{y}-{m}-{d} {h}:{i}:{s}",a=void 0;"object"===(void 0===e?"undefined":l()(e))?a=e:(10===(""+e).length&&(e=1e3*parseInt(e)),a=new Date(e));var r={y:a.getFullYear(),m:a.getMonth()+1,d:a.getDate(),h:a.getHours(),i:a.getMinutes(),s:a.getSeconds(),a:a.getDay()};return n.replace(/{(y|m|d|h|i|s|a)+}/g,function(e,t){var n=r[t];return"a"===t?["日","一","二","三","四","五","六"][n]:(e.length>0&&n<10&&(n="0"+n),n||0)})}function d(e,t,n){var a=void 0,r=void 0,i=void 0,o=void 0,s=void 0,l=function l(){var c=+new Date-o;c<t&&c>0?a=setTimeout(l,t-c):(a=null,n||(s=e.apply(i,r),a||(i=r=null)))};return function(){for(var r=arguments.length,c=Array(r),d=0;d<r;d++)c[d]=arguments[d];i=this,o=+new Date;var u=n&&!a;return a||(a=setTimeout(l,t)),u&&(s=e.apply(i,c),i=c=null),s}}function u(e){var t=void 0,n=e.split("-"),a=parseInt(n[0]),r=parseInt(n[1]),i=parseInt(n[2]),o=new Date,s=o.getFullYear(),l=o.getMonth()+1,c=o.getDate();if(s===a)t=0;else{var d=s-a;if(d>0)if(l===r)t=c-i<0?d-1:d;else t=l-r<0?d-1:d;else t=-1}return t}t.b=function(){var e=o()(r.a.mark(function e(t,n,a){var i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),(i=new Image).src=t,e.next=5,i.onload;case 5:if(console.log(i.width,i.height),n/a!=i.width/i.height){e.next=8;break}return e.abrupt("return",i.width+"px * "+i.height+"px");case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}},e,this)}));return function(t,n,a){return e.apply(this,arguments)}}()},"7f3+":function(e,t,n){"use strict";var a=n("MT78"),r=n.n(a),i=n("7Qib");n("gX0l");var o={props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"350px"},autoResize:{type:Boolean,default:!0},chartData:{type:Array,default:function(){return[]},required:!0}},data:function(){return{chart:null,predefineColors:["#19C5F4","#ffd700","#18bc9c","#90ee90","#00ced1","#1e90ff","#ff5c1d","#ff1651","#ff65f3","#1e90ff"]}},watch:{chartData:function(e){this.initChart(),this.chart.resize()}},mounted:function(){var e=this;this.autoResize&&(this.__resizeHandler=Object(i.a)(function(){e.chart&&e.chart.resize()},100),window.addEventListener("resize",this.__resizeHandler)),document.getElementsByClassName("sidebar-container")[0].addEventListener("transitionend",this.sidebarResizeHandler)},beforeDestroy:function(){this.chart&&(this.autoResize&&window.removeEventListener("resize",this.__resizeHandler),document.getElementsByClassName("sidebar-container")[0].removeEventListener("transitionend",this.sidebarResizeHandler),this.chart.dispose(),this.chart=null)},methods:{sidebarResizeHandler:function(e){"width"===e.propertyName&&this.__resizeHandler()},getRandomColor:function(){for(var e="#",t=0;t<6;t++)e+="0123456789abcdef"[parseInt(16*Math.random())];return e},setOptions:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={data:[]},n=[],a=0;a<e.length;a++){var r=this.predefineColors[a];t.data.push(e[a].label),n.push({name:e[a].label,smooth:!0,type:"line",itemStyle:{normal:{color:r,lineStyle:{color:r,width:2},areaStyle:{color:r+"33"}}},data:e[a].dataList,animationDuration:2800,animationEasing:"quadraticOut"})}this.chart.setOption({xAxis:{data:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],boundaryGap:!1,axisTick:{show:!1}},grid:{left:10,right:10,bottom:20,top:30,containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross"},padding:[5,10]},yAxis:{axisTick:{show:!1}},legend:t,series:n})},initChart:function(){this.chart=r.a.init(this.$el,"macarons"),this.setOptions(this.chartData)}}},s=n("KHd+"),l=Object(s.a)(o,function(){var e=this.$createElement;return(this._self._c||e)("div",{class:this.className,style:{height:this.height,width:this.width}})},[],!1,null,null,null);l.options.__file="LineChart.vue";t.a=l.exports},AHIP:function(e,t,n){},UDkW:function(e,t,n){"use strict";var a=n("AHIP");n.n(a).a},"zAZ/":function(e,t,n){"use strict";n.d(t,"e",function(){return i}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"a",function(){return l}),n.d(t,"f",function(){return c}),n.d(t,"b",function(){return d});var a=n("EJiy"),r=n.n(a);function i(e){var t=e.column,n=e.prop,a=e.order;this.order={column:t,prop:n,order:a},this.getData({sortName:n,sortOrder:a&&("ascending"===a?"asc":"desc")})}function o(e){this.getData(this.order?{sortName:this.order.prop,sortOrder:this.order.order&&("ascending"===this.order.order?"asc":"desc")}:{})}function s(e){this.$store.getters.userInfo.pageSize=e,this.pageSize=e,this.getData(this.order?{sortName:this.order.prop,sortOrder:this.order.order&&("ascending"===this.order.order?"asc":"desc")}:{})}function l(e){this.th[e].check=!this.th[e].check}function c(e,t){if(0===arguments.length)return null;var n=t||"{y}-{m}-{d} {h}:{i}:{s}",a=void 0;"object"===(void 0===e?"undefined":r()(e))?a=e:(10===(""+e).length&&(e=1e3*parseInt(e)),a=new Date(e));var i={y:a.getFullYear(),m:a.getMonth()+1,d:a.getDate(),h:a.getHours(),i:a.getMinutes(),s:a.getSeconds(),a:a.getDay()};return n.replace(/{(y|m|d|h|i|s|a)+}/g,function(e,t){var n=i[t];return"a"===t?["日","一","二","三","四","五","六"][n]:(e.length>0&&n<10&&(n="0"+n),n||0)})}function d(e){var t=e.substr(0,10);t=t.replace(/-/g,"/");var n=new Date(t),a=new Date;a=a.valueOf();var r=Math.ceil((n-a)/864e5);return 0===r?"今天":r>0&&r<30?r+"天":r>=30&&r<360?Math.ceil(r/30)+"月":r>=360?Math.ceil(r/360)+"年":"逾期"+Math.ceil((a-n)/864e5)+"天"}}}]);