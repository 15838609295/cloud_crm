(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-237a"],{LPG2:function(e,t,a){"use strict";a.r(t);var r=a("gDS+"),n=a.n(r),s=a("zAZ/"),i={data:function(){return{isShow:!0,searchTerms:{searchType:0,searchValue:"",status:"",date:"",owner_uin:""},tableMaxHeight:document.documentElement.clientHeight-300,tableLoading:!1,currentPage:1,pageSize:30,total:0,tableData:[]}},watch:{$route:function(e){"腾讯订单管理"===e.name?(this.isShow=!0,this.getData()):this.isShow=!1}},created:function(){this.getData()},methods:{handleCurrentChange:s.c,handleSizeChange:s.d,handleSortChange:s.e,parseTime:s.f,searchTypeChange:function(e){0===e&&this.getData()},getData:function(){var e=this;this.tableLoading=!0;var t="",a={page_no:this.currentPage,page_size:this.pageSize,deal_name:this.searchTerms.searchValue,status:this.searchTerms.status,owner_uin:this.searchTerms.owner_uin};if(0===this.searchTerms.searchType){t="tencent/getTencentOrders";var r=new Date,n=r.getTime()/6e4+1440;a.start_time=Object(s.f)(r,"{y}-{m}-{d}")+" 00:00:00",a.end_time=Object(s.f)(6e4*n,"{y}-{m}-{d}")+" 00:00:00"}else if(t="tencent/selectCustomerOrders",""!==this.searchTerms.date&&null!==this.searchTerms.date&&this.searchTerms.date){var i=new Date(this.searchTerms.date).getTime()/6e4+1440;a.start_time=this.searchTerms.date+" 00:00:00",a.end_time=Object(s.f)(6e4*i,"{y}-{m}-{d}")+" 00:00:00"}else{var l=new Date,o=l.getTime()/6e4+1440;a.start_time=Object(s.f)(l,"{y}-{m}-{d}")+" 00:00:00",a.end_time=Object(s.f)(6e4*o,"{y}-{m}-{d}")+" 00:00:00"}this.$store.dispatch("GetConnect",{url:t,data:a}).then(function(t){e.tableData=t.data.list,e.total=parseInt(t.data.total),e.tableLoading=!1}).catch(function(t){e.tableLoading=!1,e.$message.error(t.msg+",请刷新或联系管理员")})},getNowData:function(){var e=this;this.tableLoading=!0;this.currentPage=1,this.$store.dispatch("GetConnect",{url:"tencent/cacheTencentOrder"}).then(function(t){e.getData()}).catch(function(t){e.tableLoading=!1,e.$message.error(t.msg+",请刷新或联系管理员")})},setState:function(e){var t=this;e.status=0===e.status?1:0;var a="member/ajax/"+e.id,r={action:"status",status:e.status};this.$store.dispatch("GetConnect",{url:a,data:r}).then(function(a){t.$message.success("修改用户状态成功，状态："+(1===e.status?"已激活":"已冻结"))}).catch(function(a){e.status=0===e.status?1:0,t.$message.error("修改用户状态失败，请刷新或联系管理员")})},toDetails:function(e){this.$router.push({path:"./order/details",query:{row:n()(e)}})},toPay:function(e){this.$router.push({path:"./order/pay",query:{row:n()(e)}})}}},l=(a("tDFL"),a("KHd+")),o=Object(l.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container bg-gray"},[a("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[a("router-view")],1),e._v(" "),e.isShow?a("el-card",{staticClass:"box-1"},[a("div",{staticClass:"header-reamrk"},[a("el-row",[e._v("由于您的客户数量较大,已为您的客户订单做了缓存优化(每两小时更新一次数据)已给您更顺畅的浏览体验,如需实时代付客户的订单,请您\n        "),a("el-button",{attrs:{type:"text"},on:{click:e.getNowData}},[e._v("点击获取实时代付订单")]),e._v("\n        操作."),a("br"),e._v("目前仅支持搜索当天订单号,需使用搜索功能时请清除日期选择.\n      ")],1)],1),e._v(" "),a("div",{staticClass:"header"},[a("div",[a("el-select",{attrs:{placeholder:"状态"},on:{change:e.searchTypeChange},model:{value:e.searchTerms.searchType,callback:function(t){e.$set(e.searchTerms,"searchType",t)},expression:"searchTerms.searchType"}},[a("el-option",{attrs:{value:0,label:"缓存搜索"}}),e._v(" "),a("el-option",{attrs:{value:1,label:"腾讯云搜索"}})],1),e._v(" "),a("el-select",{attrs:{placeholder:"状态",clearable:""},on:{change:e.getData},model:{value:e.searchTerms.status,callback:function(t){e.$set(e.searchTerms,"status",t)},expression:"searchTerms.status"}},[a("el-option",{attrs:{value:"1",label:"未支付"}}),e._v(" "),a("el-option",{attrs:{value:"2",label:"已支付"}}),e._v(" "),a("el-option",{attrs:{value:"3",label:"发货中"}}),e._v(" "),a("el-option",{attrs:{value:"4",label:"已发货"}}),e._v(" "),a("el-option",{attrs:{value:"5",label:"发货失败"}}),e._v(" "),a("el-option",{attrs:{value:"6",label:"已退款"}}),e._v(" "),a("el-option",{attrs:{value:"7",label:"已关单"}}),e._v(" "),a("el-option",{attrs:{value:"8",label:"订单过期"}}),e._v(" "),a("el-option",{attrs:{value:"9",label:"订单已失效"}}),e._v(" "),a("el-option",{attrs:{value:"10",label:"产品已失效"}}),e._v(" "),a("el-option",{attrs:{value:"11",label:"代付拒绝"}}),e._v(" "),a("el-option",{attrs:{value:"12",label:"支付中"}})],1),e._v(" "),e.searchTerms.searchType?a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},on:{change:e.getData},model:{value:e.searchTerms.date,callback:function(t){e.$set(e.searchTerms,"date",t)},expression:"searchTerms.date"}}):e._e(),e._v(" "),e.searchTerms.searchType?a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入客户账号id"},on:{change:e.getData},model:{value:e.searchTerms.owner_uin,callback:function(t){e.$set(e.searchTerms,"owner_uin",t)},expression:"searchTerms.owner_uin"}}):e._e(),e._v(" "),e.searchTerms.searchType?e._e():a("el-input",{staticClass:"search-input",attrs:{placeholder:"仅支持搜索当天订单号"},on:{change:e.getData},model:{value:e.searchTerms.searchValue,callback:function(t){e.$set(e.searchTerms,"searchValue",t)},expression:"searchTerms.searchValue"}}),e._v(" "),a("el-button",{staticClass:"do-btn",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.getData}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableData,"max-height":e.tableMaxHeight,border:"","highlight-current-row":""},on:{"sort-change":e.handleSortChange}},[a("el-table-column",{attrs:{prop:"creatTime",label:"创建时间","min-width":"160","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.creatTime?t.row.creatTime:"--")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"dealName",label:"订单号","min-width":"140","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态","min-width":"120","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.dealStatus)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"客户账号/备注","min-width":"180","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.creater?t.row.creater:"--")+"\n          "),a("div",{staticClass:"remarks"},[e._v(e._s(t.row.clientRemark))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsName",label:"云产品","min-width":"120","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"balance",label:"费用（元）","min-width":"140","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"real-price"},[e._v(e._s((t.row.goodsPrice.realTotalCost/100).toFixed(2))+"元")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"isArrears",label:"支付方式","min-width":"100","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(0===t.row.payerMode?"自付":"代付")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"120","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"===t.row.status?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.toPay(t.row)}}},[e._v("代付")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.toDetails(t.row)}}},[e._v("订单详情")])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.currentPage,"page-size":e.pageSize,total:e.total,layout:"total, prev, pager, next, jumper"},on:{"update:currentPage":function(t){e.currentPage=t},"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1):e._e()],1)},[],!1,null,"b6c34dd8",null);o.options.__file="index.vue";t.default=o.exports},tDFL:function(e,t,a){"use strict";var r=a("yGhx");a.n(r).a},yGhx:function(e,t,a){},"zAZ/":function(e,t,a){"use strict";a.d(t,"e",function(){return s}),a.d(t,"c",function(){return i}),a.d(t,"d",function(){return l}),a.d(t,"a",function(){return o}),a.d(t,"f",function(){return c}),a.d(t,"b",function(){return u});var r=a("EJiy"),n=a.n(r);function s(e){var t=e.column,a=e.prop,r=e.order;this.order={column:t,prop:a,order:r},this.getData({sortName:a,sortOrder:r&&("ascending"===r?"asc":"desc")})}function i(e){this.getData(this.order?{sortName:this.order.prop,sortOrder:this.order.order&&("ascending"===this.order.order?"asc":"desc")}:{})}function l(e){this.$store.getters.userInfo.pageSize=e,this.pageSize=e,this.getData(this.order?{sortName:this.order.prop,sortOrder:this.order.order&&("ascending"===this.order.order?"asc":"desc")}:{})}function o(e){this.th[e].check=!this.th[e].check}function c(e,t){if(0===arguments.length)return null;var a=t||"{y}-{m}-{d} {h}:{i}:{s}",r=void 0;"object"===(void 0===e?"undefined":n()(e))?r=e:(10===(""+e).length&&(e=1e3*parseInt(e)),r=new Date(e));var s={y:r.getFullYear(),m:r.getMonth()+1,d:r.getDate(),h:r.getHours(),i:r.getMinutes(),s:r.getSeconds(),a:r.getDay()};return a.replace(/{(y|m|d|h|i|s|a)+}/g,function(e,t){var a=s[t];return"a"===t?["日","一","二","三","四","五","六"][a]:(e.length>0&&a<10&&(a="0"+a),a||0)})}function u(e){var t=e.substr(0,10);t=t.replace(/-/g,"/");var a=new Date(t),r=new Date;r=r.valueOf();var n=Math.ceil((a-r)/864e5);return 0===n?"今天":n>0&&n<30?n+"天":n>=30&&n<360?Math.ceil(n/30)+"月":n>=360?Math.ceil(n/360)+"年":"逾期"+Math.ceil((r-a)/864e5)+"天"}}}]);